<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>firestore-extended documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../../images/favicon.ico">
	   <link rel="stylesheet" href="../../styles/style.css">
        <link rel="stylesheet" href="../../styles/dark.css" media="(prefers-color-scheme: dark)">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../../" class="navbar-brand">firestore-extended documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content additional-page">
                   <div class="content-data">














                   




<h1 id="write--add">Write / Add</h1>
<h4 id="for-a-working-demo-checkout-demo-or-code">For a working demo checkout: <a href="../../../demo">Demo</a>, or <a href="https://github.com/Tylder/angularfirestore-deep">Code</a></h4>
<h4 id="method-documentation">Method Documentation</h4>
<ul>
<li><a href="../../classes/AngularFirestoreDeep.html#addDeep$">addDeep$</a></li>
</ul>
<p>Allows for easy splitting up of data into child collections and documents.</p>
<p>All you need to do is specify the child collections that should be created in <a href="../../interfaces/SubCollectionWriter.html">SubCollectionWriters</a></p>
<p>Example restaurant object to add to firestore (same as can be seen in <a href="https://angularfirestore-deep.web.app/demo/">demo</a>):</p>
<div><pre class="line-numbers"><code class="language-typescript">{
    name: &#39;Tonys Pizzeria and Italian Food&#39;,
    category: &#39;italian&#39;,
    averageReviewScore: 6.5,
    address: {
        zipCode: &#39;12345&#39;,
        city: &#39;example city&#39;,
        line1: &#39;12 example rd&#39;
    },
    dishes: [
        {
            name: &#39;Margherita Pizza&#39;,
            images: [
                {url: &#39;example.jpg&#39;},
                {url: &#39;example2.jpg&#39;}
            ]
        },
        {
            name: &#39;Pasta alla Carbonara&#39;,
            images: [
                {url: &#39;example.jpg&#39;},
                {url: &#39;example2.jpg&#39;}
            ]
        }
    ],
    reviews: [
        {
            score: 5,
            text: &#39;decent food&#39;,
            userName: &#39;anon123&#39;
        },
        {
            score: 8,
            text: &#39;good food&#39;,
            userName: &#39;foodlover33&#39;
        },
    ]
},</code></pre></div><p>If we wish to split this restaurant object up by putting reviews and dishes in their own collection and also keep the images 
in the dishes in their collection under dishes all we have to do is specify that in a list of SubCollectionWriters</p>
<h5 id="sub-collection-writers-used-in-the-examples">Sub Collection Writers used in the examples.</h5>
<p><a href="../../interfaces/SubCollectionWriter.html">SubCollectionWriter documentation</a></p>
<div><pre class="line-numbers"><code class="language-typescript">const restaurantSubCollectionWriters: SubCollectionWriter[] = [
  { name: &#39;reviews&#39; }, // make reviews a sub collection
  {
    name: &#39;dishes&#39;,  // make dishes a sub collection
    subCollectionWriters: [ // sub collection inside a sub collection
      { name: &#39;images&#39; } // make images a sub collection inside dishes
    ]
  },
];</code></pre></div><p>Once that is done its easy to write all this to firestore: </p>
<div><pre class="line-numbers"><code class="language-typescript">addRestaurant$(restaurant: RestaurantItem): Observable&lt;RestaurantItem&gt; {
    return this.ngFirestoreDeep
        .addDeep$&lt;RestaurantItem&gt;(restaurant, this.restaurantCollectionFs, restaurantSubCollectionWriters, true, restaurant.name);
}</code></pre></div><h5 id="models-used-in-the-examples">Models used in the examples.</h5>
<p>Notice that they extend <a href="../../interfaces/FirestoreItem.html">FirestoreItem</a></p>
<div><pre class="line-numbers"><code class="language-typescript">export interface RestaurantItem extends FirestoreItem {
  name: string;
  category: string;
  averageReviewScore: number;
  address: AddressItem;
  dishes?: DishItem[]; // optional so that we can get just the base object to display in a list
  reviews?: ReviewItem[]; // optional so that we can get just the base object to display in a list
}

export interface AddressItem {
  zipCode: string;
  city: string;
  line1: string;
}

export interface DishItem extends FirestoreItem {
  name: string;
  images: ImageItem[];
}

export interface ImageItem extends FirestoreItem {
  url: string;
}

export interface ReviewItem extends FirestoreItem  {
  score: number;
  text: string;
  userName: string;
}</code></pre></div>
                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 2;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'additional-page';
            var COMPODOC_CURRENT_PAGE_URL = 'write.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../../js/libs/custom-elements.min.js"></script>
       <script src="../../js/libs/lit-html.js"></script>
       
       <script type="module" src="../../js/menu-wc.js" defer></script>
       <script nomodule src="../../js/menu-wc_es5.js" defer></script>

       <script src="../../js/libs/bootstrap-native.js"></script>

       <script src="../../js/libs/es6-shim.min.js"></script>
       <script src="../../js/libs/EventDispatcher.js"></script>
       <script src="../../js/libs/promise.min.js"></script>
       <script src="../../js/libs/zepto.min.js"></script>

       <script src="../../js/compodoc.js"></script>

       <script src="../../js/tabs.js"></script>
       <script src="../../js/menu.js"></script>
       <script src="../../js/libs/clipboard.min.js"></script>
       <script src="../../js/libs/prism.js"></script>
       <script src="../../js/sourceCode.js"></script>
          <script src="../../js/search/search.js"></script>
          <script src="../../js/search/lunr.min.js"></script>
          <script src="../../js/search/search-lunr.js"></script>
          <script src="../../js/search/search_index.js"></script>
       <script src="../../js/lazy-load-graphs.js"></script>


    </body>
</html>
