<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>firestore-extended documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css" media="(prefers-color-scheme: dark)">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">firestore-extended documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content class">
                   <div class="content-data">











<ol class="breadcrumb">
  <li>Classes</li>
  <li >FirestoreExtended</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/lib/firestore-extended.ts</code>
        </p>


            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>Main Class.</p>

            </p>




            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#defaultDocId" >defaultDocId</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#add$" >add$</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#addSimple$" >addSimple$</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#batchCommit$" >batchCommit$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#changeDocId$" >changeDocId$</a>
                            </li>
                            <li>
                                <a href="#cleanExtrasFromData" >cleanExtrasFromData</a>
                            </li>
                            <li>
                                <a href="#cleanExtrasFromData" >cleanExtrasFromData</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#cleanExtrasFromData" >cleanExtrasFromData</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#delete$" >delete$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#deleteCollection$" >deleteCollection$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#deleteDocByPath$" >deleteDocByPath$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#deleteIndexedItemInArray$" >deleteIndexedItemInArray$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#deleteIndexedItemsInArray$" >deleteIndexedItemsInArray$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#deleteItem$" >deleteItem$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#deleteMultiple$" >deleteMultiple$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#deleteMultipleByPaths$" >deleteMultipleByPaths$</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#deleteMultipleSimple$" >deleteMultipleSimple$</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#getBatchFromMoveItemInIndexedDocs" >getBatchFromMoveItemInIndexedDocs</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#getBatchFromTransferItemInIndexedDocs" >getBatchFromTransferItemInIndexedDocs</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#getBatchFromUpdateIndexFromListOfDocs" >getBatchFromUpdateIndexFromListOfDocs</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getDeleteBatch$" >getDeleteBatch$</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#getDeleteMultipleSimpleBatch" >getDeleteMultipleSimpleBatch</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#getDocumentReferencesDeep$" >getDocumentReferencesDeep$</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#getDocumentReferencesFromCollectionRef$" >getDocumentReferencesFromCollectionRef$</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#getDocumentReferencesFromDocRef$" >getDocumentReferencesFromDocRef$</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#getDocumentReferencesFromItem" >getDocumentReferencesFromItem</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#getPathsFromItemDeepRecursiveHelper" >getPathsFromItemDeepRecursiveHelper</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#listenForCollection$" >listenForCollection$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#listenForCollectionRecursively$" >listenForCollectionRecursively$</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#listenForCollectionsDeep" >listenForCollectionsDeep</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#listenForCollectionSimple$" >listenForCollectionSimple$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#listenForDoc$" >listenForDoc$</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#listenForDocDeepRecursiveHelper$" >listenForDocDeepRecursiveHelper$</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#listenForDocSimple$" >listenForDocSimple$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#moveItemInArray$" >moveItemInArray$</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#removeDataExtrasRecursiveHelper" >removeDataExtrasRecursiveHelper</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#splitDataIntoCurrentDocAndSubCollections" >splitDataIntoCurrentDocAndSubCollections</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#transferItemInIndexedDocs" >transferItemInIndexedDocs</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#update$" >update$</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#updateDeepToBatchHelper" >updateDeepToBatchHelper</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#updateMultiple$" >updateMultiple$</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#updateSimple$" >updateSimple$</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(fs: <a href="../interfaces/FirestoreWrapper.html" target="_self">FirestoreWrapper</a>, defaultDocId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="54" class="link-to-prism">src/lib/firestore-extended.ts:54</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Constructor for AngularFirestoreWrapper</p>
</div>
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>fs</td>
                                                  
                                                        <td>
                                                                        <code><a href="../interfaces/FirestoreWrapper.html" target="_self" >FirestoreWrapper</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <code><p>Firestore wrapper Firestore extended can be used by many Firestore implementations</p>
</code>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>defaultDocId</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <code><p>The default name given to a subCollection document when no name is given</p>
</code>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="defaultDocId"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>defaultDocId</b></span>
                        <a href="#defaultDocId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;data&#x27;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="62" class="link-to-prism">src/lib/firestore-extended.ts:62</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description">The default name given to a subCollection document when no name is given</div>
                </td>
            </tr>

        </tbody>
    </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="add$"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>add$</b></span>
                        <a href="#add$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>add$(data: T, collectionRef: CollectionReference, subCollectionWriters: <a href="../interfaces/SubCollectionWriter.html" target="_self">SubCollectionWriter[]</a>, isAddDates: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>, docId?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="218"
                            class="link-to-prism">src/lib/firestore-extended.ts:218</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Add document to firestore and split it up into sub collection.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>data</td>
                                    <td>
                                            <code>T</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>the data to be saved</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>collectionRef</td>
                                    <td>
                                            <code>CollectionReference</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>CollectionReference reference to where on firestore the item should be saved</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>subCollectionWriters</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionWriter.html" target="_self" >SubCollectionWriter[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                    <td>
                                        <p>see documentation for SubCollectionWriter for more details on how these are used</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>isAddDates</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>true</code>
                                    </td>

                                    <td>
                                        <p>if true &#39;createdDate&#39; and &#39;modifiedDate&#39; is added to the data</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>docId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>If a docId is given it will use that specific id when saving the doc, if no docId is given a random id will be used.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../miscellaneous/typealiases.html#FireItem" target="_self" >Observable&lt;FireItem&lt;T&gt;&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addSimple$"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>addSimple$</b></span>
                        <a href="#addSimple$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addSimple$(data: T, collectionRef: CollectionReference, isAddDates: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>, id?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1099"
                            class="link-to-prism">src/lib/firestore-extended.ts:1099</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>A replacement/extension to the AngularFirestoreCollection.add.
Does the same as AngularFirestoreCollection.add but can also add createdDate and modifiedDate and returns
the data with the added properties in FirebaseDbItem</p>
<p>Used internally</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>data</td>
                                    <td>
                                            <code>T</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>the data to be added to the document, cannot contain types firestore won&#39;t allow</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>collectionRef</td>
                                    <td>
                                            <code>CollectionReference</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>the CollectionReference where the document should be added</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>isAddDates</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>true</code>
                                    </td>

                                    <td>
                                        <p>if true adds modifiedDate and createdDate to the data</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>if given the added document will be given this id, otherwise a random unique id will be used.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../miscellaneous/typealiases.html#FireItem" target="_self" >Observable&lt;FireItem&lt;T&gt;&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="batchCommit$"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>batchCommit$</b></span>
                        <a href="#batchCommit$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>batchCommit$(batch: firebase.firestore.WriteBatch)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1537"
                            class="link-to-prism">src/lib/firestore-extended.ts:1537</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Turn a batch into an Observable instead of Promise.</p>
<p>For some reason angularfire returns a promise on batch.commit() instead of an observable like for
everything else.</p>
<p>This method turns it into an observable</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>batch</td>
                                    <td>
                                            <code>firebase.firestore.WriteBatch</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="changeDocId$"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>changeDocId$</b></span>
                        <a href="#changeDocId$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>changeDocId$(docRef: DocumentReference, newId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, subCollectionQueries: <a href="../interfaces/SubCollectionQuery.html" target="_self">SubCollectionQuery[]</a>, subCollectionWriters?: <a href="../interfaces/SubCollectionWriter.html" target="_self">SubCollectionWriter[]</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="426"
                            class="link-to-prism">src/lib/firestore-extended.ts:426</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Firestore doesn&#39;t allow you do change the name or move a doc directly so you will have to create a new doc under the new name
and then delete the old doc.
returns the new doc once the delete is done.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>docRef</td>
                                    <td>
                                            <code>DocumentReference</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>DocumentReference to have its id changed</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>newId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>the new id</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>subCollectionQueries</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionQuery.html" target="_self" >SubCollectionQuery[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                    <td>
                                        <p>if the document has child documents the subCollectionQueries are needed to locate them</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>subCollectionWriters</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionWriter.html" target="_self" >SubCollectionWriter[]</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>if the document has child documents the SubCollectionWriters are needed to add them back</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../miscellaneous/typealiases.html#FireItem" target="_self" >Observable&lt;FireItem&lt;T&gt;&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="cleanExtrasFromData"></a>
                    <span class="name">
                        <span ><b>cleanExtrasFromData</b></span>
                        <a href="#cleanExtrasFromData"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>cleanExtrasFromData(data, subCollectionWriters?: <a href="../interfaces/SubCollectionWriter.html" target="_self">SubCollectionWriter[]</a>, additionalFieldsToRemove?: string[])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="840"
                            class="link-to-prism">src/lib/firestore-extended.ts:840</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>clean FirestoreBaseItem properties from the data.
Usually done if you wish to save the data to firestore, since some FirestoreBaseItem properties are of non allowed types.</p>
<p>Goes through each level and removes DbItemExtras
In case you wish to save the data</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>data</td>
                                    <td>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>data to be cleaned, either single item or an array of items</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>subCollectionWriters</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionWriter.html" target="_self" >SubCollectionWriter[]</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                    <td>
                                        <p>if the document has child documents the SubCollectionWriters are needed to locate them</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>additionalFieldsToRemove</td>
                                    <td>
                                            <code>string[]</code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>T</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="cleanExtrasFromData"></a>
                    <span class="name">
                        <span ><b>cleanExtrasFromData</b></span>
                        <a href="#cleanExtrasFromData"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>cleanExtrasFromData(datas: Array<>, subCollectionWriters?: <a href="../interfaces/SubCollectionWriter.html" target="_self">SubCollectionWriter[]</a>, additionalFieldsToRemove?: string[])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="844"
                            class="link-to-prism">src/lib/firestore-extended.ts:844</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>datas</td>
                                    <td>
                                            <code>Array&lt;&gt;</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>subCollectionWriters</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionWriter.html" target="_self" >SubCollectionWriter[]</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                                <tr>
                                    <td>additionalFieldsToRemove</td>
                                    <td>
                                            <code>string[]</code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Array&lt;T&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="cleanExtrasFromData"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>cleanExtrasFromData</b></span>
                        <a href="#cleanExtrasFromData"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>cleanExtrasFromData(data:  | Array<>, subCollectionWriters: <a href="../interfaces/SubCollectionWriter.html" target="_self">SubCollectionWriter[]</a>, additionalFieldsToRemove: string[])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="848"
                            class="link-to-prism">src/lib/firestore-extended.ts:848</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>data</td>
                                    <td>
                                            <code> | Array&lt;&gt;</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>subCollectionWriters</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionWriter.html" target="_self" >SubCollectionWriter[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                </tr>
                                <tr>
                                    <td>additionalFieldsToRemove</td>
                                    <td>
                                            <code>string[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>T | Array</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="delete$"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>delete$</b></span>
                        <a href="#delete$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>delete$(docRef: DocumentReference, subCollectionQueries: <a href="../interfaces/SubCollectionQuery.html" target="_self">SubCollectionQuery[]</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="693"
                            class="link-to-prism">src/lib/firestore-extended.ts:693</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Delete Document and child documents</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>docRef</td>
                                    <td>
                                            <code>DocumentReference</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>DocumentReference that is to be deleted</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>subCollectionQueries</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionQuery.html" target="_self" >SubCollectionQuery[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                    <td>
                                        <p>if the document has child documents the subCollectionQueries are needed to locate them</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deleteCollection$"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>deleteCollection$</b></span>
                        <a href="#deleteCollection$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>deleteCollection$(collectionRef: CollectionReference, subCollectionQueries: <a href="../interfaces/SubCollectionQuery.html" target="_self">SubCollectionQuery[]</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="783"
                            class="link-to-prism">src/lib/firestore-extended.ts:783</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Delete all documents and sub collections as specified in subCollectionQueries.
Not very efficient and causes a lot of db reads.
If possible use the firebase CLI or the console instead when deleting large collections.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>collectionRef</td>
                                    <td>
                                            <code>CollectionReference</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>subCollectionQueries</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionQuery.html" target="_self" >SubCollectionQuery[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;any&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deleteDocByPath$"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>deleteDocByPath$</b></span>
                        <a href="#deleteDocByPath$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>deleteDocByPath$(docPath: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, subCollectionQueries: <a href="../interfaces/SubCollectionQuery.html" target="_self">SubCollectionQuery[]</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="799"
                            class="link-to-prism">src/lib/firestore-extended.ts:799</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Delete firestore document by path
Convenience method in case we do not have direct access to the AngularFirestoreDocument reference</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>docPath</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>A string representing the path of the referenced document (relative to the root of the database).</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>subCollectionQueries</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionQuery.html" target="_self" >SubCollectionQuery[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                    <td>
                                        <p>if the document has child documents the subCollectionQueries are needed to locate them</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;any&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deleteIndexedItemInArray$"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>deleteIndexedItemInArray$</b></span>
                        <a href="#deleteIndexedItemInArray$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>deleteIndexedItemInArray$(items: <a href="../undefineds/FireItem.html" target="_self">Array&lt;FireItem&lt;A&gt;&gt;</a>, indexToDelete: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, subCollectionQueries: <a href="../interfaces/SubCollectionQuery.html" target="_self">SubCollectionQuery[]</a>, useCopy: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="548"
                            class="link-to-prism">src/lib/firestore-extended.ts:548</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>A</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Use when you wish to delete an indexed document and have the remaining documents update their indices to reflect the change.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>items</td>
                                    <td>
                                                <code><a href="../miscellaneous/typealiases.html#FireItem" target="_self" >Array&lt;FireItem&lt;A&gt;&gt;</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>array of FireItem<A> docs with index variables to be updated</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>indexToDelete</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                    </td>
                                </tr>
                                <tr>
                                    <td>subCollectionQueries</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionQuery.html" target="_self" >SubCollectionQuery[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                    <td>
                                    </td>
                                </tr>
                                <tr>
                                    <td>useCopy</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>false</code>
                                    </td>

                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deleteIndexedItemsInArray$"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>deleteIndexedItemsInArray$</b></span>
                        <a href="#deleteIndexedItemsInArray$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>deleteIndexedItemsInArray$(items: <a href="../undefineds/FireItem.html" target="_self">Array&lt;FireItem&lt;A&gt;&gt;</a>, indicesToDelete: number[], subCollectionQueries: <a href="../interfaces/SubCollectionQuery.html" target="_self">SubCollectionQuery[]</a>, useCopy: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="585"
                            class="link-to-prism">src/lib/firestore-extended.ts:585</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>A</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Use when you wish to delete several indexed documents and have the remaining documents update their indices to reflect the change.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>items</td>
                                    <td>
                                                <code><a href="../miscellaneous/typealiases.html#FireItem" target="_self" >Array&lt;FireItem&lt;A&gt;&gt;</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>array of FireItem<A> docs with index variables to be updated</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>indicesToDelete</td>
                                    <td>
                                            <code>number[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                    </td>
                                </tr>
                                <tr>
                                    <td>subCollectionQueries</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionQuery.html" target="_self" >SubCollectionQuery[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                    <td>
                                    </td>
                                </tr>
                                <tr>
                                    <td>useCopy</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>false</code>
                                    </td>

                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deleteItem$"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>deleteItem$</b></span>
                        <a href="#deleteItem$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>deleteItem$(item: <a href="../undefineds/FireItem.html" target="_self">FireItem&lt;T&gt;</a>, subCollectionQueries: <a href="../interfaces/SubCollectionQuery.html" target="_self">SubCollectionQuery[]</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="812"
                            class="link-to-prism">src/lib/firestore-extended.ts:812</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Delete document by FirestoreItem</p>
<p>Convenience method that works the same as deleteDeep$ but takes a FirestoreItem to be deleted</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>item</td>
                                    <td>
                                                <code><a href="../miscellaneous/typealiases.html#FireItem" target="_self" >FireItem&lt;T&gt;</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>FirestoreItem to be deleted</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>subCollectionQueries</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionQuery.html" target="_self" >SubCollectionQuery[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                    <td>
                                        <p>if the document has child documents the subCollectionQueries are needed to locate them</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;any&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deleteMultiple$"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>deleteMultiple$</b></span>
                        <a href="#deleteMultiple$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>deleteMultiple$(docRefs: DocumentReference[], subCollectionQueries: <a href="../interfaces/SubCollectionQuery.html" target="_self">SubCollectionQuery[]</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="744"
                            class="link-to-prism">src/lib/firestore-extended.ts:744</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Delete Documents and child documents</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>docRefs</td>
                                    <td>
                                            <code>DocumentReference[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <ul>
<li>A list of DocumentReference that are to be deleted</li>
</ul>

                                    </td>
                                </tr>
                                <tr>
                                    <td>subCollectionQueries</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionQuery.html" target="_self" >SubCollectionQuery[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                    <td>
                                        <p>if the document has child documents the subCollectionQueries are needed to locate them</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;any&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deleteMultipleByPaths$"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>deleteMultipleByPaths$</b></span>
                        <a href="#deleteMultipleByPaths$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>deleteMultipleByPaths$(docPaths: string[])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="731"
                            class="link-to-prism">src/lib/firestore-extended.ts:731</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>docPaths</td>
                                    <td>
                                            <code>string[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;any&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deleteMultipleSimple$"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>deleteMultipleSimple$</b></span>
                        <a href="#deleteMultipleSimple$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>deleteMultipleSimple$(docRefs: DocumentReference[])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1303"
                            class="link-to-prism">src/lib/firestore-extended.ts:1303</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Delete Documents</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>docRefs</td>
                                    <td>
                                            <code>DocumentReference[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>A list of DocumentReference that are to be deleted</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getBatchFromMoveItemInIndexedDocs"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>getBatchFromMoveItemInIndexedDocs</b></span>
                        <a href="#getBatchFromMoveItemInIndexedDocs"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getBatchFromMoveItemInIndexedDocs(items: <a href="../undefineds/FireItem.html" target="_self">Array&lt;FireItem&lt;A&gt;&gt;</a>, fromIndex: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, toIndex: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, useCopy)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="505"
                            class="link-to-prism">src/lib/firestore-extended.ts:505</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>A</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Does the heavy lifting when it comes to updating multiple docs to change their index.
Not called directly.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>items</td>
                                    <td>
                                                <code><a href="../miscellaneous/typealiases.html#FireItem" target="_self" >Array&lt;FireItem&lt;A&gt;&gt;</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>array of FireItem<A> docs with index variables to be updated</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>fromIndex</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                    </td>
                                </tr>
                                <tr>
                                    <td>toIndex</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                    </td>
                                </tr>
                                <tr>
                                    <td>useCopy</td>
                                    <td>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>false</code>
                                    </td>

                                    <td>
                                        <p>if true the given array will not be updated</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>firebase.firestore.WriteBatch</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getBatchFromTransferItemInIndexedDocs"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>getBatchFromTransferItemInIndexedDocs</b></span>
                        <a href="#getBatchFromTransferItemInIndexedDocs"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getBatchFromTransferItemInIndexedDocs(previousArray: <a href="../undefineds/FireItem.html" target="_self">Array&lt;FireItem&lt;A&gt;&gt;</a>, currentArray: <a href="../undefineds/FireItem.html" target="_self">Array&lt;FireItem&lt;A&gt;&gt;</a>, previousIndex: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, currentIndex: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, currentArrayName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, additionalDataUpdateOnMovedItem?: literal type, isUpdateModifiedDateOnMovedItem, useCopy)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1225"
                            class="link-to-prism">src/lib/firestore-extended.ts:1225</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>A</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Used mainly for drag and drop scenarios where we drag an item from one list to another and the the docs
have an index value and a groupName.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>previousArray</td>
                                    <td>
                                                <code><a href="../miscellaneous/typealiases.html#FireItem" target="_self" >Array&lt;FireItem&lt;A&gt;&gt;</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>currentArray</td>
                                    <td>
                                                <code><a href="../miscellaneous/typealiases.html#FireItem" target="_self" >Array&lt;FireItem&lt;A&gt;&gt;</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>previousIndex</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>currentIndex</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>currentArrayName</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>additionalDataUpdateOnMovedItem</td>
                                    <td>
                                            <code>literal type</code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>isUpdateModifiedDateOnMovedItem</td>
                                    <td>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>true</code>
                                    </td>

                                </tr>
                                <tr>
                                    <td>useCopy</td>
                                    <td>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>false</code>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>firebase.firestore.WriteBatch</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getBatchFromUpdateIndexFromListOfDocs"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>getBatchFromUpdateIndexFromListOfDocs</b></span>
                        <a href="#getBatchFromUpdateIndexFromListOfDocs"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getBatchFromUpdateIndexFromListOfDocs(items: <a href="../undefineds/FireItem.html" target="_self">Array&lt;FireItem&lt;A&gt;&gt;</a>, batch: WriteBatch)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="648"
                            class="link-to-prism">src/lib/firestore-extended.ts:648</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>A</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Run this on collections with a fixed order using an index: number attribute;
This will update that index with the index in the collectionData, so it should be sorted by index first.
Basically needs to be run after a delete</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>items</td>
                                    <td>
                                                <code><a href="../miscellaneous/typealiases.html#FireItem" target="_self" >Array&lt;FireItem&lt;A&gt;&gt;</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>batch</td>
                                    <td>
                                            <code>WriteBatch</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>this.fs.fbApp.firestore().batch()</code>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>WriteBatch</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getDeleteBatch$"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>getDeleteBatch$</b></span>
                        <a href="#getDeleteBatch$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getDeleteBatch$(docRef: DocumentReference, subCollectionQueries: <a href="../interfaces/SubCollectionQuery.html" target="_self">SubCollectionQuery[]</a>, batch: WriteBatch)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="715"
                            class="link-to-prism">src/lib/firestore-extended.ts:715</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Returns Writebatch that is set to delete Document and child documents of given docRef</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>docRef</td>
                                    <td>
                                            <code>DocumentReference</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>DocumentReference that is to be deleted</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>subCollectionQueries</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionQuery.html" target="_self" >SubCollectionQuery[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                    <td>
                                        <p>if the document has child documents the subCollectionQueries are needed to locate them</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>batch</td>
                                    <td>
                                            <code>WriteBatch</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>this.fs.fbApp.firestore().batch()</code>
                                    </td>

                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;WriteBatch&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getDeleteMultipleSimpleBatch"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>getDeleteMultipleSimpleBatch</b></span>
                        <a href="#getDeleteMultipleSimpleBatch"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getDeleteMultipleSimpleBatch(docRefs: DocumentReference[], batch: WriteBatch)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1310"
                            class="link-to-prism">src/lib/firestore-extended.ts:1310</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>docRefs</td>
                                    <td>
                                            <code>DocumentReference[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>batch</td>
                                    <td>
                                            <code>WriteBatch</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>this.fs.fbApp.firestore().batch()</code>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>WriteBatch</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getDocumentReferencesDeep$"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>getDocumentReferencesDeep$</b></span>
                        <a href="#getDocumentReferencesDeep$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getDocumentReferencesDeep$(ref: DocumentReference | CollectionReference, subCollectionQueries: <a href="../interfaces/SubCollectionQuery.html" target="_self">SubCollectionQuery[]</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1377"
                            class="link-to-prism">src/lib/firestore-extended.ts:1377</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Returns an Observable containing a list of DocumentReference found under the given docRef using the SubCollectionQuery[]
Mainly used to delete a docFs and its sub docs</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>ref</td>
                                    <td>
                                            <code>DocumentReference | CollectionReference</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>: DocumentReference | CollectionReference</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>subCollectionQueries</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionQuery.html" target="_self" >SubCollectionQuery[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                    <td>
                                        <p>: SubCollectionQuery[]</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;DocumentReference[]&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getDocumentReferencesFromCollectionRef$"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>getDocumentReferencesFromCollectionRef$</b></span>
                        <a href="#getDocumentReferencesFromCollectionRef$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getDocumentReferencesFromCollectionRef$(collectionRef: CollectionReference, subCollectionQueries: <a href="../interfaces/SubCollectionQuery.html" target="_self">SubCollectionQuery[]</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1404"
                            class="link-to-prism">src/lib/firestore-extended.ts:1404</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>collectionRef</td>
                                    <td>
                                            <code>CollectionReference</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>subCollectionQueries</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionQuery.html" target="_self" >SubCollectionQuery[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;DocumentReference[]&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getDocumentReferencesFromDocRef$"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>getDocumentReferencesFromDocRef$</b></span>
                        <a href="#getDocumentReferencesFromDocRef$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getDocumentReferencesFromDocRef$(docRef: DocumentReference, subCollectionQueries: <a href="../interfaces/SubCollectionQuery.html" target="_self">SubCollectionQuery[]</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1388"
                            class="link-to-prism">src/lib/firestore-extended.ts:1388</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>docRef</td>
                                    <td>
                                            <code>DocumentReference</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>subCollectionQueries</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionQuery.html" target="_self" >SubCollectionQuery[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;DocumentReference[]&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getDocumentReferencesFromItem"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>getDocumentReferencesFromItem</b></span>
                        <a href="#getDocumentReferencesFromItem"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getDocumentReferencesFromItem(item: <a href="../undefineds/FireItem.html" target="_self">FireItem&lt;T&gt;</a>, subCollectionQueries: <a href="../interfaces/SubCollectionQuery.html" target="_self">SubCollectionQuery[]</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1440"
                            class="link-to-prism">src/lib/firestore-extended.ts:1440</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Used by deleteDeepByItem$ to get all the AngularFirestoreDocuments to be deleted
including child documents using SubCollectionQueries</p>
<p>Internal use</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>item</td>
                                    <td>
                                                <code><a href="../miscellaneous/typealiases.html#FireItem" target="_self" >FireItem&lt;T&gt;</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>FirestoreItem from where we get the AngularFirestoreDocuments</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>subCollectionQueries</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionQuery.html" target="_self" >SubCollectionQuery[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                    <td>
                                        <p>if the dbItem has child documents the subCollectionQueries are needed to locate them</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>DocumentReference[]</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getPathsFromItemDeepRecursiveHelper"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>getPathsFromItemDeepRecursiveHelper</b></span>
                        <a href="#getPathsFromItemDeepRecursiveHelper"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getPathsFromItemDeepRecursiveHelper(item: <a href="../undefineds/FireItem.html" target="_self">FireItem&lt;T&gt;</a>, subCollectionQueries: <a href="../interfaces/SubCollectionQuery.html" target="_self">SubCollectionQuery[]</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1451"
                            class="link-to-prism">src/lib/firestore-extended.ts:1451</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>DO NOT CALL THIS METHOD, its meant as a support method for getDocs$</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>item</td>
                                    <td>
                                                <code><a href="../miscellaneous/typealiases.html#FireItem" target="_self" >FireItem&lt;T&gt;</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>subCollectionQueries</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionQuery.html" target="_self" >SubCollectionQuery[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>string[]</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="listenForCollection$"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>listenForCollection$</b></span>
                        <a href="#listenForCollection$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>listenForCollection$(collectionRef: CollectionReference, subCollectionQueries: <a href="../interfaces/SubCollectionQuery.html" target="_self">SubCollectionQuery[]</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="137"
                            class="link-to-prism">src/lib/firestore-extended.ts:137</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Same as AngularFirestoreCollection.snapshotChanges but it adds the properties in FirebaseDbItem.</p>
<p>Important to understand this is will trigger for every change/update on any of the documents we are listening to.
That means that if any document we are listening to is changed the entire object will be triggered containing the updated data.</p>
<p>   Example usage.</p>
<p>   ngFirestoreDeep: RxFirestoreExtended;  //  RxFirestoreExtended variable
   restaurantCollectionFs = this.ngFireStore.collection(&#39;restaurants&#39;); // AngularFirestoreCollectionRef to restaurants</p>
<p>   constructor(private ngFireStore: AngularFirestore) {
       this.ngFirestoreDeep = new RxFirestoreExtended(ngFireStore);  //  initialize AngularFireStoreDeep with AngularFirestore
   }</p>
<p>   listenForRestaurants$(): Observable&lt;RestaurantItem[]&gt; {
       return this.ngFirestoreDeep.listenForCollection$<RestaurantItem>(this.restaurantCollectionFs);
   }</p>
<p>   If you do not wish to listen for changes and only care about getting the values once</p>
<p>   getRestaurants$(): Observable&lt;RestaurantItem[]&gt; {
       return this.ngFirestoreDeep.listenForCollection$<RestaurantItem>(this.restaurantCollectionFs).pipe(
         take(1)
       );
   }</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>collectionRef</td>
                                    <td>
                                            <code>CollectionReference</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>the collectionRef which will be listened to</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>subCollectionQueries</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionQuery.html" target="_self" >SubCollectionQuery[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../miscellaneous/typealiases.html#FireItem" target="_self" >Observable&lt;Array&lt;FireItem&lt;T&gt;&gt;&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="listenForCollectionRecursively$"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>listenForCollectionRecursively$</b></span>
                        <a href="#listenForCollectionRecursively$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>listenForCollectionRecursively$(collectionPath: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, collectionKey: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, orderKey?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="167"
                            class="link-to-prism">src/lib/firestore-extended.ts:167</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Listens for collections inside collections with the same name to an unlimited depth and returns all of it as an array.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>collectionPath</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>collectionKey</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>orderKey</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;any&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="listenForCollectionsDeep"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>listenForCollectionsDeep</b></span>
                        <a href="#listenForCollectionsDeep"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>listenForCollectionsDeep(item: <a href="../undefineds/FireItem.html" target="_self">FireItem&lt;T&gt;</a>, subCollectionQueries: <a href="../interfaces/SubCollectionQuery.html" target="_self">SubCollectionQuery[]</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="987"
                            class="link-to-prism">src/lib/firestore-extended.ts:987</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Used internally for both listenForDoc and listenForCollection in order to recursively get collections.</p>
<p>Please use listenForDoc or listenForCollection.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>item</td>
                                    <td>
                                                <code><a href="../miscellaneous/typealiases.html#FireItem" target="_self" >FireItem&lt;T&gt;</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>subCollectionQueries</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionQuery.html" target="_self" >SubCollectionQuery[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../miscellaneous/typealiases.html#FireItem" target="_self" >Observable&lt;FireItem[]&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="listenForCollectionSimple$"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>listenForCollectionSimple$</b></span>
                        <a href="#listenForCollectionSimple$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>listenForCollectionSimple$(collectionRef: CollectionReference<any>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="943"
                            class="link-to-prism">src/lib/firestore-extended.ts:943</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Listens for single collection and returns an array of documents as FireItem<T>[]
Used internally, please use listenForCollection$() instead.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>collectionRef</td>
                                    <td>
                                            <code>CollectionReference&lt;any&gt;</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>the collectionRef which will be listened to</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../miscellaneous/typealiases.html#FireItem" target="_self" >Observable&lt;Array&lt;FireItem&lt;T&gt;&gt;&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="listenForDoc$"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>listenForDoc$</b></span>
                        <a href="#listenForDoc$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>listenForDoc$(docRef: DocumentReference, subCollectionQueries: <a href="../interfaces/SubCollectionQuery.html" target="_self">SubCollectionQuery[]</a>, actionIfNotExist: <a href="../undefineds/DocNotExistAction.html" target="_self">DocNotExistAction</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="96"
                            class="link-to-prism">src/lib/firestore-extended.ts:96</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Allows for listening to documents and collections n deep up to the firestore max of 100 levels.</p>
<p>Triggers for any change in any document that is listened to.</p>
<p>E.x:
     const subCollectionQueries: SubCollectionQuery[] = [
        { name: &#39;data&#39; },
        { name: &#39;secure&#39; },
        { name: &#39;variants&#39; },
        { name: &#39;images&#39;,
          queryFn: ref =&gt; ref.orderBy(&#39;index&#39;),
          collectionWithNames: [
            { name: &#39;secure&#39;}
          ]
        },
    ];</p>
<div><pre class="line-numbers"><code class="language-none">this.listenForDocAndSubCollections&lt;Product&gt;(docFs, collections)</code></pre></div><p>Wrapper for listenForDocDeepRecursiveHelper$ so that we can cast the return to the correct type
All logic is in listenForDocDeepRecursiveHelper$.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>docRef</td>
                                    <td>
                                            <code>DocumentReference</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <ul>
<li>a docRef with potential queryFn</li>
</ul>

                                    </td>
                                </tr>
                                <tr>
                                    <td>subCollectionQueries</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionQuery.html" target="_self" >SubCollectionQuery[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                    <td>
                                        <ul>
<li>see example</li>
</ul>

                                    </td>
                                </tr>
                                <tr>
                                    <td>actionIfNotExist</td>
                                    <td>
                                                <code><a href="../miscellaneous/enumerations.html#DocNotExistAction" target="_self" >DocNotExistAction</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>DocNotExistAction.RETURN_ALL_BUT_DATA</code>
                                    </td>

                                    <td>
                                        <p>Action to take if document does not exist</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../miscellaneous/typealiases.html#FireItem" target="_self" >Observable&lt;FireItem&lt;T&gt;&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="listenForDocDeepRecursiveHelper$"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>listenForDocDeepRecursiveHelper$</b></span>
                        <a href="#listenForDocDeepRecursiveHelper$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>listenForDocDeepRecursiveHelper$(docRef: DocumentReference, subCollectionQueries: <a href="../interfaces/SubCollectionQuery.html" target="_self">SubCollectionQuery[]</a>, actionIfNotExist: <a href="../undefineds/DocNotExistAction.html" target="_self">DocNotExistAction</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1069"
                            class="link-to-prism">src/lib/firestore-extended.ts:1069</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>DO NOT CALL THIS METHOD, meant to be used solely by listenForDocAndSubCollections$</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>docRef</td>
                                    <td>
                                            <code>DocumentReference</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>subCollectionQueries</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionQuery.html" target="_self" >SubCollectionQuery[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                </tr>
                                <tr>
                                    <td>actionIfNotExist</td>
                                    <td>
                                                <code><a href="../miscellaneous/enumerations.html#DocNotExistAction" target="_self" >DocNotExistAction</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>DocNotExistAction.RETURN_NULL</code>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;any&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="listenForDocSimple$"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>listenForDocSimple$</b></span>
                        <a href="#listenForDocSimple$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>listenForDocSimple$(docRef: DocumentReference<any>, actionIfNotExist: <a href="../undefineds/DocNotExistAction.html" target="_self">DocNotExistAction</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="884"
                            class="link-to-prism">src/lib/firestore-extended.ts:884</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Same as AngularFirestoreDocument.snapshotChanges but it adds the properties in FirebaseDbItem
and also allows for to choose action to take when document does not exist</p>
<p>Important to understand this is will trigger for every change/update on the document we are listening to.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>docRef</td>
                                    <td>
                                            <code>DocumentReference&lt;any&gt;</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>DocumentReference that will be listened to</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>actionIfNotExist</td>
                                    <td>
                                                <code><a href="../miscellaneous/enumerations.html#DocNotExistAction" target="_self" >DocNotExistAction</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>DocNotExistAction.RETURN_ALL_BUT_DATA</code>
                                    </td>

                                    <td>
                                        <p>Action to take if document does not exist</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../miscellaneous/typealiases.html#FireItem" target="_self" >Observable&lt;FireItem&lt;T&gt;&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="moveItemInArray$"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>moveItemInArray$</b></span>
                        <a href="#moveItemInArray$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>moveItemInArray$(items: <a href="../undefineds/FireItem.html" target="_self">Array&lt;FireItem&lt;A&gt;&gt;</a>, fromIndex: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, toIndex: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, useCopy)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="472"
                            class="link-to-prism">src/lib/firestore-extended.ts:472</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>A</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Moved item within the same list so we need to update the index of all items in the list;
Use a copy if you dont wish to update the given array, for example when you want to just listen for the change of the db..
The reason to not do this is because it takes some time for the db to update and it looks better if the list updates immediately.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>items</td>
                                    <td>
                                                <code><a href="../miscellaneous/typealiases.html#FireItem" target="_self" >Array&lt;FireItem&lt;A&gt;&gt;</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>array of FireItem<A> docs with index variables to be updated</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>fromIndex</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                    </td>
                                </tr>
                                <tr>
                                    <td>toIndex</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                    </td>
                                </tr>
                                <tr>
                                    <td>useCopy</td>
                                    <td>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>false</code>
                                    </td>

                                    <td>
                                        <p>if true the given array will not be updated</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="removeDataExtrasRecursiveHelper"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>removeDataExtrasRecursiveHelper</b></span>
                        <a href="#removeDataExtrasRecursiveHelper"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>removeDataExtrasRecursiveHelper(dbItem, subCollectionWriters: <a href="../interfaces/SubCollectionWriter.html" target="_self">SubCollectionWriter[]</a>, additionalFieldsToRemove: string[])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1326"
                            class="link-to-prism">src/lib/firestore-extended.ts:1326</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Recursive method to clean FirestoreBaseItem properties from the dbItem</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>dbItem</td>
                                    <td>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>the data to be cleaned</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>subCollectionWriters</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionWriter.html" target="_self" >SubCollectionWriter[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                    <td>
                                        <p>list of SubCollectionWriters to handle sub collections</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>additionalFieldsToRemove</td>
                                    <td>
                                            <code>string[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>T</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="splitDataIntoCurrentDocAndSubCollections"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>splitDataIntoCurrentDocAndSubCollections</b></span>
                        <a href="#splitDataIntoCurrentDocAndSubCollections"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>splitDataIntoCurrentDocAndSubCollections(data: T, subCollectionWriters: <a href="../interfaces/SubCollectionWriter.html" target="_self">SubCollectionWriter[]</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1495"
                            class="link-to-prism">src/lib/firestore-extended.ts:1495</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>DO  NOT  CALL THIS METHOD, used in addDeep and updateDeep to split the data into currentDoc and subCollections
Only goes one sub level deep;</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>data</td>
                                    <td>
                                            <code>T</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>subCollectionWriters</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionWriter.html" target="_self" >SubCollectionWriter[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/CurrentDocSubCollectionSplit.html" target="_self" >CurrentDocSubCollectionSplit</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="transferItemInIndexedDocs"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>transferItemInIndexedDocs</b></span>
                        <a href="#transferItemInIndexedDocs"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>transferItemInIndexedDocs(previousArray: <a href="../undefineds/FireItem.html" target="_self">Array&lt;FireItem&lt;A&gt;&gt;</a>, currentArray: <a href="../undefineds/FireItem.html" target="_self">Array&lt;FireItem&lt;A&gt;&gt;</a>, previousIndex: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, currentIndex: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, currentArrayName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, additionalDataUpdateOnMovedItem?: literal type, isUpdateModifiedDateOnMovedItem, useCopy)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="662"
                            class="link-to-prism">src/lib/firestore-extended.ts:662</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>A</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>previousArray</td>
                                    <td>
                                                <code><a href="../miscellaneous/typealiases.html#FireItem" target="_self" >Array&lt;FireItem&lt;A&gt;&gt;</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>currentArray</td>
                                    <td>
                                                <code><a href="../miscellaneous/typealiases.html#FireItem" target="_self" >Array&lt;FireItem&lt;A&gt;&gt;</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>previousIndex</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>currentIndex</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>currentArrayName</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>additionalDataUpdateOnMovedItem</td>
                                    <td>
                                            <code>literal type</code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>isUpdateModifiedDateOnMovedItem</td>
                                    <td>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>true</code>
                                    </td>

                                </tr>
                                <tr>
                                    <td>useCopy</td>
                                    <td>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>false</code>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="update$"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>update$</b></span>
                        <a href="#update$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>update$(data: Partial<A>, docRef: DocumentReference, subCollectionWriters: <a href="../interfaces/SubCollectionWriter.html" target="_self">SubCollectionWriter[]</a>, isAddModifiedDate: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="381"
                            class="link-to-prism">src/lib/firestore-extended.ts:381</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>A</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Update document and child documents</p>
<p>Be careful when updating a document of any kind since we allow partial data there cannot be any type checking prior to update
so its possible to introduce spelling mistakes on attributes and so forth</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>data</td>
                                    <td>
                                            <code>Partial&lt;A&gt;</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>the data that is to be added or updated { [field: string]: any }</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>docRef</td>
                                    <td>
                                            <code>DocumentReference</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>DocumentReference to be updated</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>subCollectionWriters</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionWriter.html" target="_self" >SubCollectionWriter[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                    <td>
                                        <p>if the data contains properties that should be placed in child collections and documents specify that here</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>isAddModifiedDate</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>true</code>
                                    </td>

                                    <td>
                                        <p>if true the modifiedDate property is added/updated on the affected documents</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;any&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateDeepToBatchHelper"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>updateDeepToBatchHelper</b></span>
                        <a href="#updateDeepToBatchHelper"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateDeepToBatchHelper(data: A, docRef: DocumentReference, subCollectionWriters: <a href="../interfaces/SubCollectionWriter.html" target="_self">SubCollectionWriter[]</a>, isAddModifiedDate: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>, batch?: WriteBatch)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1172"
                            class="link-to-prism">src/lib/firestore-extended.ts:1172</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>A</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>DO NOT CALL THIS METHOD, used by update deep</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>data</td>
                                    <td>
                                            <code>A</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>docRef</td>
                                    <td>
                                            <code>DocumentReference</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>subCollectionWriters</td>
                                    <td>
                                                <code><a href="../interfaces/SubCollectionWriter.html" target="_self" >SubCollectionWriter[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                </tr>
                                <tr>
                                    <td>isAddModifiedDate</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>true</code>
                                    </td>

                                </tr>
                                <tr>
                                    <td>batch</td>
                                    <td>
                                            <code>WriteBatch</code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>WriteBatch</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateMultiple$"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>updateMultiple$</b></span>
                        <a href="#updateMultiple$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateMultiple$(docRefs: DocumentReference[], data: A, isAddModifiedDate: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="401"
                            class="link-to-prism">src/lib/firestore-extended.ts:401</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>A</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Update/ add data to the firestore documents</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>docRefs</td>
                                    <td>
                                            <code>DocumentReference[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>list of DocumentReference to be have their data updated</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>data</td>
                                    <td>
                                            <code>A</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>data to add/update</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>isAddModifiedDate</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>true</code>
                                    </td>

                                    <td>
                                        <p>if true the modifiedDate is added/updated</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateSimple$"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>updateSimple$</b></span>
                        <a href="#updateSimple$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateSimple$(data: A, docRef: DocumentReference, isAddModifiedDate: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="1161"
                            class="link-to-prism">src/lib/firestore-extended.ts:1161</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>A</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Used internally for updates that doesn&#39;t affect child documents</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>data</td>
                                    <td>
                                            <code>A</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>docRef</td>
                                    <td>
                                            <code>DocumentReference</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>isAddModifiedDate</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>true</code>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>





    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import {combineLatest, forkJoin, from, Observable, of} from &#x27;rxjs&#x27;;

import {catchError, filter, map, mergeMap, switchMap, take, tap} from &#x27;rxjs/operators&#x27;;

import firebase from &#x27;firebase/app&#x27;;
import &#x27;firebase/firestore&#x27;;

import {addCreatedDate, addDataToItem, addModifiedDate, convertTimestampToDate, getRefFromPath} from &#x27;./helpers&#x27;;
import {SubCollectionQuery} from &#x27;./sub-collection-query&#x27;;
import {FirebaseErrorExt, FirestoreWrapper} from &#x27;./interfaces&#x27;;
import {FireItem, FirestoreMetadata} from &#x27;./models/firestoreItem&#x27;;
import {SubCollectionWriter} from &#x27;./sub-collection-writer&#x27;;
import DocumentSnapshot &#x3D; firebase.firestore.DocumentSnapshot;
import CollectionReference &#x3D; firebase.firestore.CollectionReference;
import DocumentReference &#x3D; firebase.firestore.DocumentReference;
import DocumentData &#x3D; firebase.firestore.DocumentData;
import QueryDocumentSnapshot &#x3D; firebase.firestore.QueryDocumentSnapshot;
import WriteBatch &#x3D; firebase.firestore.WriteBatch;
import { moveItemInArray, transferArrayItem } from &#x27;./drag-utils&#x27;;

/**
 * Action to be taken by listener if the document does not exist.
 */
export enum DocNotExistAction {
  /** returns a null object */
  RETURN_NULL,

  /** return all the extras such as ref, path and so on but no data, kinda just ignores that the doc isn&#x27;t there */
  RETURN_ALL_BUT_DATA,

  /** do not return at all until it does exist */
  FILTER,

  /** return doc not found error &#x27;doc_not_found&#x27; */
  THROW_DOC_NOT_FOUND,
}

/** Used internally */
interface CurrentDocSubCollectionSplit {
  /** contains the document that is considered the current */
  currentDoc: FireItem&lt;{}&gt;;
  /** sub collections of current document */
  subCollections: {[index: string]: any};
}



/**
 * Main Class.
 *
 *
 *
 */
export class FirestoreExtended {

  /**
   * Constructor for AngularFirestoreWrapper
   *
   * @param fs Firestore wrapper Firestore extended can be used by many Firestore implementations
   * @param defaultDocId The default name given to a subCollection document when no name is given
   */
  constructor(private fs: FirestoreWrapper, public defaultDocId: string &#x3D; &#x27;data&#x27;) {
  }

  /* ----------  LISTEN -------------- */

  /**
   *
   * Allows for listening to documents and collections n deep up to the firestore max of 100 levels.
   *
   * Triggers for any change in any document that is listened to.
   *
   *
   * E.x:
   *      const subCollectionQueries: SubCollectionQuery[] &#x3D; [
   *         { name: &#x27;data&#x27; },
   *         { name: &#x27;secure&#x27; },
   *         { name: &#x27;variants&#x27; },
   *         { name: &#x27;images&#x27;,
   *           queryFn: ref &#x3D;&gt; ref.orderBy(&#x27;index&#x27;),
   *           collectionWithNames: [
   *             { name: &#x27;secure&#x27;}
   *           ]
   *         },
   *     ];
   *
   *     this.listenForDocAndSubCollections&lt;Product&gt;(docFs, collections)
   *
   * Wrapper for listenForDocDeepRecursiveHelper$ so that we can cast the return to the correct type
   * All logic is in listenForDocDeepRecursiveHelper$.
   *
   * @param docRef - a docRef with potential queryFn
   * @param subCollectionQueries - see example
   * @param actionIfNotExist Action to take if document does not exist
   */
  public listenForDoc$&lt;T&gt;(docRef: DocumentReference,
                          subCollectionQueries: SubCollectionQuery[] &#x3D; [],
                          actionIfNotExist: DocNotExistAction &#x3D; DocNotExistAction.RETURN_ALL_BUT_DATA): Observable&lt;FireItem&lt;T&gt;&gt; {

    return this.listenForDocDeepRecursiveHelper$(docRef, subCollectionQueries, actionIfNotExist).pipe(
      map(data &#x3D;&gt; data as FireItem&lt;T&gt;)
    );
  }

  /**
   * Same as AngularFirestoreCollection.snapshotChanges but it adds the properties in FirebaseDbItem.
   *
   * Important to understand this is will trigger for every change/update on any of the documents we are listening to.
   * That means that if any document we are listening to is changed the entire object will be triggered containing the updated data.
   *
   *
   *    Example usage.
   *
   *    ngFirestoreDeep: RxFirestoreExtended;  //  RxFirestoreExtended variable
   *    restaurantCollectionFs &#x3D; this.ngFireStore.collection(&#x27;restaurants&#x27;); // AngularFirestoreCollectionRef to restaurants
   *
   *    constructor(private ngFireStore: AngularFirestore) {
   *        this.ngFirestoreDeep &#x3D; new RxFirestoreExtended(ngFireStore);  //  initialize AngularFireStoreDeep with AngularFirestore
   *    }
   *
   *    listenForRestaurants$(): Observable&lt;RestaurantItem[]&gt; {
   *        return this.ngFirestoreDeep.listenForCollection$&lt;RestaurantItem&gt;(this.restaurantCollectionFs);
   *    }
   *
   *    If you do not wish to listen for changes and only care about getting the values once
   *
   *    getRestaurants$(): Observable&lt;RestaurantItem[]&gt; {
   *        return this.ngFirestoreDeep.listenForCollection$&lt;RestaurantItem&gt;(this.restaurantCollectionFs).pipe(
   *          take(1)
   *        );
   *    }
   *
   * @param collectionRef the collectionRef which will be listened to
   * @param subCollectionQueries
   * @param documentChangeTypes list of DocumentChangeType that will be listened to, if null listen to all
   */
  public listenForCollection$&lt;T&gt;(collectionRef: CollectionReference,
                                 subCollectionQueries: SubCollectionQuery[] &#x3D; []): Observable&lt;Array&lt;FireItem&lt;T&gt;&gt;&gt; {
    /**
     * Returns an observable that will emit whenever the ref changes in any way.
     * Also adds the id and ref to the object.
     */
    return this.listenForCollectionSimple$(collectionRef).pipe(
      mergeMap((items: FireItem&lt;{}&gt;[]) &#x3D;&gt; {

        if (items &#x3D;&#x3D; null || items.length &#x3D;&#x3D;&#x3D; 0) { return of([]); }
        if (subCollectionQueries.length &lt;&#x3D; 0) { return of(items); }

        const collectionListeners: Array&lt;Observable&lt;any&gt;&gt; &#x3D; [];

        items.forEach(item &#x3D;&gt; {

          const collectionListener &#x3D; this.listenForCollectionsDeep(item, subCollectionQueries)

          collectionListeners.push(collectionListener);
        });

        /* Finally return the combined collection listeners */
        return combineLatest(collectionListeners);
      })
    )
  }

  /**
   * Listens for collections inside collections with the same name to an unlimited depth and returns all of it as an array.
   */
  public listenForCollectionRecursively$&lt;T&gt;(collectionPath: string,
                                            collectionKey: string,
                                            orderKey?: string): Observable&lt;any&gt; {

    const collectionRef &#x3D; getRefFromPath(collectionPath, this.fs.fbApp) as CollectionReference;
    if (orderKey !&#x3D; null) {
      collectionRef.orderBy(orderKey);
    }

    return this.listenForCollectionSimple$&lt;T&gt;(collectionRef).pipe(
      mergeMap((items: FireItem&lt;T&gt;[]) &#x3D;&gt; {

        if (items.length &lt;&#x3D; 0) { return of([]); } // TODO  perhaps make this throw an error so that we can skip it

        // if (items.length &lt;&#x3D; 0) { throwError(&#x27;No more &#x27;); }

        const nextLevelObs: Array&lt;Observable&lt;FireItem&lt;T&gt;&gt;&gt; &#x3D; [];

        for (const item of items) {


          const nextLevelPath &#x3D; item.firestoreMetadata.ref.collection(collectionKey).path;  // one level deeper

          const nextLevelItems$ &#x3D; this.listenForCollectionRecursively$(nextLevelPath, collectionKey, orderKey).pipe(
            map((nextLevelItems: Array&lt;FireItem&lt;T&gt;&gt;) &#x3D;&gt; {
              if (nextLevelItems.length &gt; 0) { return {...item, [collectionKey]: nextLevelItems } as FireItem&lt;T&gt;; }
              else {  return {...item} as FireItem&lt;T&gt;; }  // dont include an empty array
            }),
          );
          nextLevelObs.push(nextLevelItems$);
        }

        return combineLatest(nextLevelObs).pipe(
          tap(val &#x3D;&gt; console.log(val))
        );
      }),

    );
  }

  /* ---------- ADD -------------- */

  /**
   * Add document to firestore and split it up into sub collection.
   *
   * @param data the data to be saved
   * @param collectionRef CollectionReference reference to where on firestore the item should be saved
   * @param subCollectionWriters see documentation for SubCollectionWriter for more details on how these are used
   * @param isAddDates if true &#x27;createdDate&#x27; and &#x27;modifiedDate&#x27; is added to the data
   * @param docId If a docId is given it will use that specific id when saving the doc, if no docId is given a random id will be used.
   */
  public add$&lt;T&gt;(data: T,
                 collectionRef: CollectionReference,
                 subCollectionWriters: SubCollectionWriter[] &#x3D; [],
                 isAddDates: boolean &#x3D; true,
                 docId?: string): Observable&lt;FireItem&lt;T&gt;&gt; {

    if (Array.isArray(data) &amp;&amp; docId &amp;&amp; subCollectionWriters.length &gt; 0) {
      const error: FirebaseErrorExt &#x3D; {
        name: &#x27;FirebaseErrorExt&#x27;,
        code: &#x27;firestoreExt/invalid-sub-collection-writers&#x27;,
        message: &#x27;Cannot have both docId and subCollectionWriters at the same time when data is an array&#x27;,
        stack: &#x27;&#x27;,
        data,
        subCollectionWriters,
        docId
      }

      throw error;
    }

    let currentDoc
    let subCollections: { [index: string]: any; }  &#x3D; {};

    /* if the data is an array and a docId is given the entire array will be saved in a single document with that docId,
    * Each item in the array will be saved as a map with the key being the array index
    * We still want the return value of this function to be as an array non as a map
    */
    if (Array.isArray(data) &amp;&amp; docId) {
      currentDoc &#x3D; data;
    } else {
      const split &#x3D; this.splitDataIntoCurrentDocAndSubCollections(data, subCollectionWriters);
      currentDoc &#x3D; split.currentDoc;
      subCollections &#x3D; split.subCollections;
    }

    return this.addSimple$&lt;T&gt;(currentDoc as T, collectionRef, isAddDates, docId).pipe(

      /* Add Sub/sub collections*/
      mergeMap((currentData: FireItem&lt;T&gt;) &#x3D;&gt; {

        const subWriters: Array&lt;Observable&lt;any&gt;&gt; &#x3D; [];

        for (const [subCollectionKey, subCollectionValue] of Object.entries(subCollections)) {
          let subSubCollectionWriters: SubCollectionWriter[] | undefined; // undefined if no subCollectionWriters
          let subDocId: string | undefined;

          if (subCollectionWriters) {
            subSubCollectionWriters &#x3D; subCollectionWriters.find(subColl &#x3D;&gt; subColl.name &#x3D;&#x3D;&#x3D; subCollectionKey)?.subCollections;
            subDocId &#x3D; subCollectionWriters.find(subColl &#x3D;&gt; subColl.name &#x3D;&#x3D;&#x3D; subCollectionKey)?.docId;
          }

          const subCollectionRef: CollectionReference &#x3D; currentData.firestoreMetadata.ref.collection(subCollectionKey);
          // const subCollectionRef: CollectionReference &#x3D; currentData.ref.collection(subCollectionKey);

          /* Handle array and object differently
          * For example if array and no docId is given it means we should save each entry as a separate doc.
          * If a docId is given we should save it using that docId under a single doc.
          * If not an array it will always be saved as a single doc, using this.defaultDocId as the default docId if none is given */
          if (Array.isArray(subCollectionValue)) {
            if (subDocId !&#x3D;&#x3D; undefined) { /* not undefined so save it as a single doc under that docId */

              /* the pipe only matters for the return subCollectionValue not for writing the data */
              const subWriter &#x3D; this.add$(subCollectionValue, subCollectionRef, subSubCollectionWriters, isAddDates, subDocId).pipe(
                map(item &#x3D;&gt; {
                  // return {[key]: item};
                  return {key: subCollectionKey, value: item}; /* key and subCollectionValue as separate k,v properties */
                })
              );
              subWriters.push(subWriter);

            } else { /* docId is undefined so we save each object in the array separate */
              subCollectionValue.forEach((arrayValue: FireItem&lt;{}&gt;) &#x3D;&gt; {

                /* the pipe only matters for the return subCollectionValue not for writing the data */
                const subWriter &#x3D; this.add$(arrayValue, subCollectionRef, subSubCollectionWriters, isAddDates).pipe(
                  map(item &#x3D;&gt; {
                    // return {[key]: [item]};
                    /* key and subCollectionValue as separate k,v properties -- subCollectionValue in an array */
                    return {key: subCollectionKey, value: [item]};
                  })
                );

                subWriters.push(subWriter);
              });
            }
          } else { /* Not an array so a single Object*/
            subDocId &#x3D; subDocId !&#x3D;&#x3D; undefined ? subDocId : this.defaultDocId;

            /* the pipe only matters for the return subCollectionValue not for writing the data */
            const subWriter &#x3D; this.add$(subCollectionValue, subCollectionRef, subSubCollectionWriters, isAddDates, subDocId).pipe(
              map(item &#x3D;&gt; {
                // return {[key]: item};
                return {key: subCollectionKey, value: item}; /* key and subCollectionValue as separate k,v properties */
              })
            );

            subWriters.push(subWriter);
          }
        } /* end of iteration */

        if (subWriters.length &gt; 0) { /* if subWriters.length &gt; 0 it means we need to handle the subWriters */

          /* the pipe only matters for the return value not for writing the data */
          return combineLatest(subWriters).pipe(
            // tap(sub &#x3D;&gt; console.log(sub)),

            // TODO super duper ugly way of joining the data together but I cannot think of a better way..also it doesnt really matter.
            // TODO The ugliness only relates to how the return object looks after we add, it has no effect on how the object is saved on
            // TODO firestore.

            map((docDatas: Array&lt;Map&lt;string, []&gt;&gt;) &#x3D;&gt; { /* List of sub docs*/
              const groupedData &#x3D; {};

              docDatas.forEach((doc: {[index: string]: any}) &#x3D;&gt; { /* iterate over each doc */

                const key &#x3D; doc.key;
                const value &#x3D; doc.value;

                /* if groupedData has the key already it means that the several docs have the same key..so an array */
                // @ts-ignore
                if (groupedData.hasOwnProperty(key) &amp;&amp; Array.isArray(groupedData[key])) {
                  /* groupedData[key] must be an array since it already exist..add this doc.value to the array */
                  // @ts-ignore
                  (groupedData[key] as Array&lt;any&gt;).push(value[0]);
                } else {
                  // @ts-ignore
                  groupedData[key] &#x3D; value;
                }
              });

              return groupedData as T;
            }),

            // tap(groupedData &#x3D;&gt; console.log(groupedData)),

            map((groupedData: T) &#x3D;&gt; {
              return {...currentData, ...groupedData } as T;
            }),
            // tap(d &#x3D;&gt; console.log(d)),
          );
        } else {
          return of(currentData);
        }
      })
    ).pipe(
      // @ts-ignore
      take(1)
    );
  }

  /* ----------  EDIT -------------- */

  /**
   * Update document and child documents
   *
   * Be careful when updating a document of any kind since we allow partial data there cannot be any type checking prior to update
   * so its possible to introduce spelling mistakes on attributes and so forth
   *
   * @param data the data that is to be added or updated { [field: string]: any }
   * @param docRef DocumentReference to be updated
   * @param subCollectionWriters if the data contains properties that should be placed in child collections and documents specify that here
   * @param isAddModifiedDate if true the modifiedDate property is added/updated on the affected documents
   */
  public update$&lt;A extends { [field: string]: any }&gt;(data: Partial&lt;A&gt;,
                                                    docRef: DocumentReference,
                                                    subCollectionWriters: SubCollectionWriter[] &#x3D; [],
                                                    isAddModifiedDate: boolean &#x3D; true): Observable&lt;any&gt; {

    if (subCollectionWriters &#x3D;&#x3D; null || subCollectionWriters.length &#x3D;&#x3D;&#x3D; 0) {
      return this.updateSimple$(data, docRef, isAddModifiedDate); // no subCollectionWriters so just do a simple update
    }

    const batch &#x3D; this.updateDeepToBatchHelper(data, docRef, subCollectionWriters, isAddModifiedDate);
    return this.batchCommit$(batch);
  }

  /**
   * Update/ add data to the firestore documents
   *
   * @param docRefs list of DocumentReference to be have their data updated
   * @param data data to add/update
   * @param isAddModifiedDate if true the modifiedDate is added/updated
   */
  public updateMultiple$&lt;A&gt;(docRefs: DocumentReference[], data: A, isAddModifiedDate: boolean &#x3D; true): Observable&lt;void&gt; {
    const batch &#x3D; this.fs.fbApp.firestore().batch();

    if (isAddModifiedDate) {
      data &#x3D; addModifiedDate(data, false);
    }

    docRefs.forEach((docRef) &#x3D;&gt; {
      batch.update(docRef, data);
    });

    return this.batchCommit$(batch);
  }


  /**
   * Firestore doesn&#x27;t allow you do change the name or move a doc directly so you will have to create a new doc under the new name
   * and then delete the old doc.
   * returns the new doc once the delete is done.
   *
   * @param docRef DocumentReference to have its id changed
   * @param newId the new id
   * @param subCollectionQueries if the document has child documents the subCollectionQueries are needed to locate them
   * @param subCollectionWriters if the document has child documents the SubCollectionWriters are needed to add them back
   */
  public changeDocId$&lt;T&gt;(docRef: DocumentReference,
                         newId: string,
                         subCollectionQueries: SubCollectionQuery[] &#x3D; [],
                         subCollectionWriters? : SubCollectionWriter[]): Observable&lt;FireItem&lt;T&gt;&gt; {

    if (subCollectionWriters &#x3D;&#x3D; null) {
      subCollectionWriters &#x3D; subCollectionQueries as SubCollectionWriter[];
    }

    const collectionRef: CollectionReference &#x3D; docRef.parent

    return this.listenForDoc$(docRef, subCollectionQueries).pipe(
      // @ts-ignore
      take(1),
      map((oldData: T) &#x3D;&gt; this.cleanExtrasFromData(oldData, subCollectionWriters)),
      switchMap((oldData: T) &#x3D;&gt; {
        return this.add$(oldData, collectionRef, subCollectionWriters, false, newId).pipe( /* add the data under id*/
          mergeMap(newData &#x3D;&gt; { /* delete the old doc */
            return this.delete$(docRef, subCollectionQueries).pipe(
              map(() &#x3D;&gt; newData) /* keep the new data */
            );
          }),
        );
      }),
      catchError(err &#x3D;&gt; {
        console.log(&#x27;Failed to Change Doc Id: &#x27; + err);
        throw err;
      }),
      take(1),
    );

  }

  /* Move Item in Array */


  /**
   * Moved item within the same list so we need to update the index of all items in the list;
   * Use a copy if you dont wish to update the given array, for example when you want to just listen for the change of the db..
   * The reason to not do this is because it takes some time for the db to update and it looks better if the list updates immediately.
   *
   * @param items array of FireItem&lt;A&gt; docs with index variables to be updated
   * @param fromIndex
   * @param toIndex
   * @param useCopy if true the given array will not be updated
   */
  public moveItemInArray$&lt;A extends {index: number}&gt;(items: Array&lt;FireItem&lt;A&gt;&gt;,
                                                     fromIndex: number,
                                                     toIndex: number,
                                                     useCopy &#x3D; false): Observable&lt;void&gt; {

    if (fromIndex &#x3D;&#x3D; null || toIndex &#x3D;&#x3D; null || fromIndex &#x3D;&#x3D;&#x3D; toIndex || items.length &lt;&#x3D; 0) { // we didnt really move anything
      return of();
    }

    if (items[0]?.firestoreMetadata &#x3D;&#x3D; null) {
      const error: FirebaseErrorExt &#x3D; {
        name: &#x27;FirebaseErrorExt&#x27;,
        code: &#x27;firestoreExt/unable-to-change-index-of-non-document&#x27;,
        message: &#x27;The array does not appear to be a firestore document or FireItem since it lacks firestoreMetadata&#x27;,
      }
      throw error;
    }

    const batch &#x3D; this.getBatchFromMoveItemInIndexedDocs(items, fromIndex, toIndex, useCopy);

    return this.batchCommit$(batch);
  }

  /**
   * Does the heavy lifting when it comes to updating multiple docs to change their index.
   * Not called directly.
   *
   * @param items array of FireItem&lt;A&gt; docs with index variables to be updated
   * @param fromIndex
   * @param toIndex
   * @param useCopy if true the given array will not be updated
   * @protected
   */
  protected getBatchFromMoveItemInIndexedDocs&lt;A extends {index: number}&gt;(items: Array&lt;FireItem&lt;A&gt;&gt;,
                                                                         fromIndex: number,
                                                                         toIndex: number,
                                                                         useCopy &#x3D; false): firebase.firestore.WriteBatch {

    const lowestIndex &#x3D; Math.min(fromIndex, toIndex);
    const batch &#x3D; this.fs.fbApp.firestore().batch();

    if (fromIndex &#x3D;&#x3D; null || toIndex &#x3D;&#x3D; null || fromIndex &#x3D;&#x3D;&#x3D; toIndex) { // we didnt really move anything
      return batch;
    }

    let usedItems: Array&lt;FireItem&lt;A&gt;&gt;;

    if (useCopy) {
      usedItems &#x3D; Object.assign([], items);
    } else {
      usedItems &#x3D; items;
    }

    moveItemInArray&lt;A&gt;(usedItems, fromIndex, toIndex);

    const listSliceToUpdate: Array&lt;FireItem&lt;A&gt;&gt; &#x3D; usedItems.slice(lowestIndex);

    let i &#x3D; lowestIndex;
    for (const item of listSliceToUpdate) {
      if (!useCopy) { // this is just so that the given array&#x27;s index is also updated immediately
        item.index &#x3D; i;
      }
      const ref &#x3D; getRefFromPath(item.firestoreMetadata.path, this.fs.fbApp) as DocumentReference;
      batch.update(ref, {index: i});
      i++;
    }

    return batch;
  }

  /**
   * Use when you wish to delete an indexed document and have the remaining documents update their indices to reflect the change.
   *
   * @param items array of FireItem&lt;A&gt; docs with index variables to be updated
   * @param indexToDelete
   */
  public deleteIndexedItemInArray$&lt;A extends {index: number}&gt;(items: Array&lt;FireItem&lt;A&gt;&gt;,
                                                              indexToDelete: number,
                                                              subCollectionQueries: SubCollectionQuery[] &#x3D; [],
                                                              useCopy: boolean &#x3D; false): Observable&lt;void&gt; {

    let usedItems: Array&lt;FireItem&lt;A&gt;&gt;;

    if (useCopy) {
      usedItems &#x3D; Object.assign([], items);
    } else {
      usedItems &#x3D; items;
    }

    const itemToDelete &#x3D; usedItems[indexToDelete];

    // get the delete batch that also contains any sub collections of the item
    return this.getDeleteBatch$(itemToDelete.firestoreMetadata.ref, subCollectionQueries).pipe(
      map((batch) &#x3D;&gt; {
        // sort and remove the item from the usedItems and then add the update index to the batch
        usedItems.sort(item &#x3D;&gt; item.index) // make sure array is sorted by index
        usedItems.splice(indexToDelete, 1);

        this.getBatchFromUpdateIndexFromListOfDocs&lt;A&gt;(usedItems, batch);

        return batch;
      }),

      switchMap((batch) &#x3D;&gt; this.batchCommit$(batch))
    );
  }

  /**
   * Use when you wish to delete several indexed documents and have the remaining documents update their indices to reflect the change.
   *
   * @param items array of FireItem&lt;A&gt; docs with index variables to be updated
   * @param indicesToDelete
   */
  public deleteIndexedItemsInArray$&lt;A extends {index: number}&gt;(items: Array&lt;FireItem&lt;A&gt;&gt;,
                                                               indicesToDelete: number[],
                                                               subCollectionQueries: SubCollectionQuery[] &#x3D; [],
                                                               useCopy: boolean &#x3D; false): Observable&lt;void&gt; {

    let usedItems: Array&lt;FireItem&lt;A&gt;&gt;;

    if (useCopy) {
      usedItems &#x3D; Object.assign([], items);
    } else {
      usedItems &#x3D; items;
    }

    usedItems.sort(item &#x3D;&gt; item.index) // make sure array is sorted by index

    const itemsToDelete &#x3D; usedItems.filter((item, i )&#x3D;&gt; {
      return indicesToDelete.findIndex(_i &#x3D;&gt; _i &#x3D;&#x3D;&#x3D; i) !&#x3D;&#x3D; -1
    })

    // iterate in revese so as to not change the indices,
    // the indicies to delete must also be sorted
    indicesToDelete.sort()
    for (var i &#x3D; indicesToDelete.length -1; i &gt;&#x3D; 0; i--)
      usedItems.splice(indicesToDelete[i],1);

    const docRefsObs$: Observable&lt;DocumentReference[]&gt;[] &#x3D; [];

    // get the docRefs for items to be deleted including the ones in the subcollections
    itemsToDelete.forEach(itemToDelete &#x3D;&gt; {

      const obs$ &#x3D; this.getDocumentReferencesDeep$(itemToDelete.firestoreMetadata.ref, subCollectionQueries).pipe(
        take(1)
      );
      docRefsObs$.push(obs$);
    })


    return forkJoin(docRefsObs$).pipe(
      take(1),
      map((listOfDocRefs) &#x3D;&gt; {
        // concat all the separate docRefs lists into one array of docRefs
        let docRefs: DocumentReference[] &#x3D; []

        listOfDocRefs.forEach(refs &#x3D;&gt; {
          docRefs &#x3D; docRefs.concat(refs);
        })

        return docRefs
      }),
      map((docRefs: DocumentReference&lt;DocumentData&gt;[]) &#x3D;&gt; this.getDeleteMultipleSimpleBatch(docRefs)),
      map((batch: WriteBatch) &#x3D;&gt; this.getBatchFromUpdateIndexFromListOfDocs&lt;A&gt;(usedItems, batch)),
      switchMap((batch) &#x3D;&gt; this.batchCommit$(batch))
    )
  }

  /**
   * Run this on collections with a fixed order using an index: number attribute;
   * This will update that index with the index in the collectionData, so it should be sorted by index first.
   * Basically needs to be run after a delete
   *
   * @param items
   * @protected
   */
  protected getBatchFromUpdateIndexFromListOfDocs&lt;A extends {index: number}&gt;(items: Array&lt;FireItem&lt;A&gt;&gt;,
                                                                             batch: WriteBatch &#x3D; this.fs.fbApp.firestore().batch()): WriteBatch {

    items.forEach((item, index) &#x3D;&gt; {
      if (item.index !&#x3D;&#x3D; index) {
        item.index &#x3D; index; // this is just so that the given array&#x27;s index is also updated immediately
        const ref &#x3D; getRefFromPath(item.firestoreMetadata.path, this.fs.fbApp) as DocumentReference;
        batch.update(ref, {index});
      }
    });

    return batch;
  }

  public transferItemInIndexedDocs&lt;A extends {index: number, groupName: string}&gt;(
    previousArray: Array&lt;FireItem&lt;A&gt;&gt;,
    currentArray: Array&lt;FireItem&lt;A&gt;&gt;,
    previousIndex: number,
    currentIndex: number,
    currentArrayName: string,
    additionalDataUpdateOnMovedItem?: {[key: string]: any},
    isUpdateModifiedDateOnMovedItem &#x3D; true,
    useCopy &#x3D; false): Observable&lt;void&gt; {

    const batch: WriteBatch &#x3D; this.getBatchFromTransferItemInIndexedDocs(previousArray,
                                                                         currentArray,
                                                                         previousIndex,
                                                                         currentIndex,
                                                                         currentArrayName,
                                                                         additionalDataUpdateOnMovedItem,
                                                                         isUpdateModifiedDateOnMovedItem,
                                                                         useCopy);

    return this.batchCommit$(batch);
  }


  /* ----------  DELETE -------------- */

  /**
   * Delete Document and child documents
   *
   * @param docRef DocumentReference that is to be deleted
   * @param subCollectionQueries if the document has child documents the subCollectionQueries are needed to locate them
   */
  public delete$(docRef: DocumentReference, subCollectionQueries: SubCollectionQuery[] &#x3D; []): Observable&lt;void&gt; {

    if (subCollectionQueries &#x3D;&#x3D; null || subCollectionQueries.length &#x3D;&#x3D;&#x3D; 0) {
      // not deep so just do a normal doc delete
      return this.fs.delete(docRef)
    }

    return this.getDocumentReferencesDeep$(docRef, subCollectionQueries).pipe(
      switchMap((docRefList: DocumentReference&lt;DocumentData&gt;[]) &#x3D;&gt; this.deleteMultipleSimple$(docRefList)),
      // catchError((err) &#x3D;&gt; { // TODO super ugly and I dont know why this error is thrown..still works
      //   if (err &#x3D;&#x3D;&#x3D; &#x27;Document Does not exists&#x27;) { return of(); }
      //   else { throw err; }
      // }),
    );
  }

  /**
   * Returns Writebatch that is set to delete Document and child documents of given docRef
   *
   * @param docRef DocumentReference that is to be deleted
   * @param subCollectionQueries if the document has child documents the subCollectionQueries are needed to locate them
   */
  public getDeleteBatch$(docRef: DocumentReference,
                         subCollectionQueries: SubCollectionQuery[] &#x3D; [],
                         batch: WriteBatch &#x3D; this.fs.fbApp.firestore().batch()): Observable&lt;WriteBatch&gt; {

    if (subCollectionQueries &#x3D;&#x3D; null || subCollectionQueries.length &#x3D;&#x3D;&#x3D; 0) {
      // not deep so just do a normal doc delete
      batch.delete(docRef)
      return of(batch);
    }

    return this.getDocumentReferencesDeep$(docRef, subCollectionQueries).pipe(
      map((docRefs: DocumentReference&lt;DocumentData&gt;[]) &#x3D;&gt; this.getDeleteMultipleSimpleBatch(docRefs)),
      take(1)
    );
  }

  public deleteMultipleByPaths$(docPaths: string[]): Observable&lt;any&gt; {
    const docRefs: DocumentReference[] &#x3D;
      docPaths.map(path &#x3D;&gt; getRefFromPath(path, this.fs.fbApp) as DocumentReference)

    return this.deleteMultipleSimple$(docRefs);
  }

  /**
   * Delete Documents and child documents
   *
   * @param docRefs - A list of DocumentReference that are to be deleted
   * @param subCollectionQueries if the document has child documents the subCollectionQueries are needed to locate them
   */
  public deleteMultiple$(docRefs: DocumentReference[], subCollectionQueries: SubCollectionQuery[] &#x3D; []): Observable&lt;any&gt; {

    if (subCollectionQueries &#x3D;&#x3D; null || subCollectionQueries.length &#x3D;&#x3D;&#x3D; 0) {
      return this.deleteMultipleSimple$(docRefs);
    }

    const deepDocRefs$: Array&lt;Observable&lt;any&gt;&gt; &#x3D; [];

    docRefs.forEach(docRef &#x3D;&gt; {
      const docRefs$ &#x3D; this.getDocumentReferencesDeep$(docRef, subCollectionQueries);
      deepDocRefs$.push(docRefs$);
    });

    return combineLatest(deepDocRefs$).pipe(
      // tap(lists &#x3D;&gt; console.log(lists)),
      map((lists: any[]) &#x3D;&gt; {
        let mainDocRefList: DocumentReference[] &#x3D; [];
        lists.forEach(list &#x3D;&gt; {
          mainDocRefList &#x3D; mainDocRefList.concat(list);
        });
        return mainDocRefList;
      }),
      // tap(lists &#x3D;&gt; console.log(lists)),
      switchMap((docRefList: DocumentReference[]) &#x3D;&gt; this.deleteMultipleSimple$(docRefList)),
      // catchError((err) &#x3D;&gt; { // TODO super ugly and I dont know why this error is thrown..still works
      //   if (err &#x3D;&#x3D;&#x3D; &#x27;Document Does not exists&#x27;) { return of(null); }
      //   else { throw err; }
      // })
    );
  }

  /**
   * Delete all documents and sub collections as specified in subCollectionQueries.
   * Not very efficient and causes a lot of db reads.
   * If possible use the firebase CLI or the console instead when deleting large collections.
   *
   * @param collectionRef
   * @param subCollectionQueries
   */
  public deleteCollection$(collectionRef: CollectionReference, subCollectionQueries: SubCollectionQuery[] &#x3D; []): Observable&lt;any&gt; {
    return this.getDocumentReferencesFromCollectionRef$(collectionRef, subCollectionQueries).pipe(
      switchMap(docRefs &#x3D;&gt; this.deleteMultiple$(docRefs))
    ).pipe(
      take(1)
    )
  }


  /**
   * Delete firestore document by path
   * Convenience method in case we do not have direct access to the AngularFirestoreDocument reference
   *
   * @param docPath A string representing the path of the referenced document (relative to the root of the database).
   * @param subCollectionQueries if the document has child documents the subCollectionQueries are needed to locate them
   */
  public deleteDocByPath$(docPath: string, subCollectionQueries: SubCollectionQuery[] &#x3D; []): Observable&lt;any&gt; {
    const docRef &#x3D; getRefFromPath(docPath, this.fs.fbApp) as DocumentReference;
    return this.delete$(docRef, subCollectionQueries);
  }

  /**
   * Delete document by FirestoreItem
   *
   * Convenience method that works the same as deleteDeep$ but takes a FirestoreItem to be deleted
   *
   * @param item FirestoreItem to be deleted
   * @param subCollectionQueries if the document has child documents the subCollectionQueries are needed to locate them
   */
  public deleteItem$&lt;T&gt;(item: FireItem&lt;T&gt;, subCollectionQueries: SubCollectionQuery[] &#x3D; []): Observable&lt;any&gt; {

    const docRefs &#x3D; this.getDocumentReferencesFromItem(item, subCollectionQueries);

    return this.deleteMultipleSimple$(docRefs).pipe(
      // catchError((err) &#x3D;&gt; { // TODO super ugly and I dont know why this error is thrown..still works
      //   if (err &#x3D;&#x3D;&#x3D; &#x27;Document Does not exists&#x27;) { return of(null); }
      //   else { throw err; }
      // }),
      take(1)
    );
  }


  /* ---- OTHER ---- */

  /**
   * clean FirestoreBaseItem properties from the data.
   * Usually done if you wish to save the data to firestore, since some FirestoreBaseItem properties are of non allowed types.
   *
   * Goes through each level and removes DbItemExtras
   * In case you wish to save the data
   *
   * @param data data to be cleaned, either single item or an array of items
   * @param subCollectionWriters if the document has child documents the SubCollectionWriters are needed to locate them
   * @param additionalFieldsToRemove
   */

  cleanExtrasFromData&lt;T&gt;(data: T &amp; DocumentData,
                         subCollectionWriters?: SubCollectionWriter[],
                         additionalFieldsToRemove?: string[]): T;

  cleanExtrasFromData&lt;T&gt;(datas: Array&lt;T &amp; DocumentData&gt;,
                         subCollectionWriters?: SubCollectionWriter[],
                         additionalFieldsToRemove?: string[]): Array&lt;T&gt;;

  public cleanExtrasFromData&lt;T&gt;(data: T &amp; DocumentData | Array&lt;T &amp; DocumentData&gt;,
                                subCollectionWriters: SubCollectionWriter[] &#x3D; [],
                                additionalFieldsToRemove: string[] &#x3D; []): T | Array&lt;T&gt; {

    // const dataToBeCleaned &#x3D; cloneDeep(data); /* clone data so we dont modify the original */
    // const dataToBeCleaned &#x3D; data;

    if (Array.isArray(data)) {

      const cleanDatas: Array&lt;T&gt; &#x3D; [];

      data.forEach(d &#x3D;&gt; {
        cleanDatas.push(
          this.removeDataExtrasRecursiveHelper(d, subCollectionWriters, additionalFieldsToRemove) as T
        );
      })

      return cleanDatas

    } else {
      return this.removeDataExtrasRecursiveHelper(data, subCollectionWriters, additionalFieldsToRemove) as T;
    }
  }


  /* ----------  PROTECTED METHODS -------------- */

  /**
   * Same as AngularFirestoreDocument.snapshotChanges but it adds the properties in FirebaseDbItem
   * and also allows for to choose action to take when document does not exist
   *
   * Important to understand this is will trigger for every change/update on the document we are listening to.
   *
   * @param docRef DocumentReference that will be listened to
   * @param actionIfNotExist Action to take if document does not exist
   */
  protected listenForDocSimple$&lt;T&gt;(docRef: DocumentReference&lt;any&gt;,
                                   actionIfNotExist: DocNotExistAction &#x3D; DocNotExistAction.RETURN_ALL_BUT_DATA
  ): Observable&lt;FireItem&lt;T&gt;&gt; {

    return this.fs.doc(docRef).pipe(
      tap((snapshot: DocumentSnapshot) &#x3D;&gt; {
        if (!snapshot.exists &amp;&amp; actionIfNotExist &#x3D;&#x3D;&#x3D; DocNotExistAction.THROW_DOC_NOT_FOUND) {
          const error: FirebaseErrorExt &#x3D; {
            name: &#x27;FirebaseErrorExt&#x27;,
            code: &#x27;firestoreExt/doc-not-found&#x27;,
            message: &#x27;Document not found and actionIfNotExist is set to THROW_DOC_NOT_FOUND&#x27;,
            docRef
          }
          throw error;
        }
      }),

      filter((snapshot: DocumentSnapshot) &#x3D;&gt; {
        return !(snapshot.exists &amp;&amp; actionIfNotExist &#x3D;&#x3D;&#x3D; DocNotExistAction.FILTER);
      }),

      map((snapshot: DocumentSnapshot) &#x3D;&gt; {

        if (snapshot.exists || actionIfNotExist &#x3D;&#x3D;&#x3D; DocNotExistAction.RETURN_ALL_BUT_DATA) {
          const data &#x3D; snapshot.data() as T;

          const firestoreMetadata: FirestoreMetadata &#x3D; {
            id: snapshot.id,
            ref: snapshot.ref,
            path: docRef.path,
            isExists: snapshot.exists,
            snapshotMetadata: snapshot.metadata
          }

          return { ...data, firestoreMetadata} as FireItem&lt;T&gt;;

        } else if (actionIfNotExist &#x3D;&#x3D;&#x3D; DocNotExistAction.RETURN_NULL) { /* doc doesn&#x27;t exist */
          return null;
        }
        return null;
      }),
      map((data) &#x3D;&gt; {
        if (data !&#x3D; null) {
          return convertTimestampToDate(data as FireItem&lt;{}&gt;);
        } else {
          return data;
        }
      }),
    ) as Observable&lt;FireItem&lt;T&gt;&gt;;
  }

  /**
   * Listens for single collection and returns an array of documents as FireItem&lt;T&gt;[]
   * Used internally, please use listenForCollection$() instead.
   *
   * @param collectionRef the collectionRef which will be listened to
   * @param documentChangeTypes list of DocumentChangeType that will be listened to, if null listen to all
   * @protected
   */
  protected listenForCollectionSimple$&lt;T&gt;(collectionRef: CollectionReference&lt;any&gt;): Observable&lt;Array&lt;FireItem&lt;T&gt;&gt;&gt; {
    /**
     * Returns an observable that will emit whenever the ref changes in any way.
     * Also adds the id and ref to the object.
     */
    return this.fs.collection(collectionRef).pipe(
      map((snaps: QueryDocumentSnapshot[]) &#x3D;&gt; {
        return snaps.map(snapshot &#x3D;&gt; {
          const data &#x3D; snapshot.data() as T;

          const id &#x3D; snapshot.id;
          const ref &#x3D; snapshot.ref;
          const path &#x3D; ref.path;
          const snapshotMetadata &#x3D; snapshot.metadata

          const firestoreMetadata: FirestoreMetadata &#x3D; {
            id,
            path,
            ref,
            snapshotMetadata,
            isExists: true
          }

          return { ...data, firestoreMetadata} as FireItem&lt;T&gt;;
        })
      }),
      map((datas: Array&lt;FireItem&lt;T&gt;&gt;) &#x3D;&gt; datas.map(data &#x3D;&gt; {
        convertTimestampToDate(data)
        return data;
      }))
    ) as Observable&lt;Array&lt;FireItem&lt;T&gt;&gt;&gt;;
  }

  /**
   * Used internally for both listenForDoc and listenForCollection in order to recursively get collections.
   *
   * Please use listenForDoc or listenForCollection.
   *
   * @param item
   * @param subCollectionQueries
   * @param documentChangeTypes
   * @param actionIfNotExist
   * @protected
   */
  protected listenForCollectionsDeep&lt;T&gt;(
    item: FireItem&lt;T&gt;,
    subCollectionQueries: SubCollectionQuery[] &#x3D; []): Observable&lt;FireItem&lt;T&gt;[]&gt; {

    if (item &#x3D;&#x3D; null) { return of([item]); }
    if (subCollectionQueries.length &lt;&#x3D; 0) { return of([item]); }

    const collectionListeners: Array&lt;Observable&lt;any&gt;&gt; &#x3D; [];

    /* Iterate over each sub collection we have given and create collection listeners*/
    subCollectionQueries.forEach(subCollectionQuery &#x3D;&gt; {

      let collectionRef &#x3D; item.firestoreMetadata.ref.collection(subCollectionQuery.name)
      if (subCollectionQuery.queryFn) {
        collectionRef &#x3D; subCollectionQuery.queryFn(collectionRef) as CollectionReference;
      }

      const collectionListener &#x3D; this.listenForCollectionSimple$(collectionRef).pipe(
        // filter(docs &#x3D;&gt; docs.length &gt; 0), // skip empty collections or if the subCollectionQuery doesnt exist
        /* Uncomment to see data on each update */
        // tap(d &#x3D;&gt; console.log(d)),
        // filter(docs &#x3D;&gt; docs !&#x3D; null),
        /* Listen For and Add any Potential Sub Docs*/
        mergeMap((items: FireItem&lt;{}&gt;[]) &#x3D;&gt; {

          if (!subCollectionQuery.subCollections) { return of(items); }

          const docListeners: Array&lt;Observable&lt;any&gt;&gt; &#x3D; [];

          items &#x3D; items.filter(d &#x3D;&gt; d !&#x3D; null); // filter out potential nulls

          items.forEach((subItem: FireItem&lt;{}&gt;) &#x3D;&gt; {
            const subDocAndCollections$ &#x3D; this.listenForCollectionsDeep(subItem, subCollectionQuery.subCollections);
            docListeners.push(subDocAndCollections$);
          });

          if (docListeners.length &lt;&#x3D; 0) { return of([]); } /* subCollectionQuery is empty or doesnt exist */

          return combineLatest(docListeners).pipe(
            // tap(val &#x3D;&gt; console.log(val))
          );
        }), /* End of Listening for sub docs */
        /* If docs.length &#x3D;&#x3D;&#x3D; 1 and the id is defaultDocId or the given docId it means we are in a sub subCollectionQuery
        and we only care about the data. So we remove the array and just make it one object with the
        subCollectionQuery name as key and docs[0] as value */
        map((items: FireItem&lt;{}&gt;[]) &#x3D;&gt; {
          const docId &#x3D; subCollectionQuery.docId !&#x3D;&#x3D; undefined ? subCollectionQuery.docId : this.defaultDocId;

          if (items.length &#x3D;&#x3D;&#x3D; 1 &amp;&amp; items[0].firestoreMetadata.id &#x3D;&#x3D;&#x3D; docId) { return {[subCollectionQuery.name]: items[0]}; }
          else { return {[subCollectionQuery.name]: items}; }
        }),
        // tap(d &#x3D;&gt; console.log(d)),
      );

      collectionListeners.push(collectionListener);
    });

    /* Finally return the combined collection listeners*/
    // @ts-ignore
    return combineLatest(collectionListeners).pipe(
      map((collectionDatas: {[collectionkName: string]: FireItem&lt;FireItem&lt;{}&gt;&gt;[]}[]) &#x3D;&gt; {
      // map((collectionDatas) &#x3D;&gt; {
        const datasMap: {[field: string]: any} &#x3D; {};

        collectionDatas.forEach((collection) &#x3D;&gt; {

          for (const [collectionName, items] of Object.entries(collection)) {
            datasMap[collectionName] &#x3D; items;
          }
        });
        return datasMap;
      }),

      map((data: DocumentData) &#x3D;&gt; {
        return {...item, ...data} as FireItem&lt;T&gt;;
      }),
    );
  }

  /**
   * DO NOT CALL THIS METHOD, meant to be used solely by listenForDocAndSubCollections$
   */
  protected listenForDocDeepRecursiveHelper$&lt;T&gt;(
    docRef: DocumentReference,
    subCollectionQueries: SubCollectionQuery[] &#x3D; [],
    actionIfNotExist: DocNotExistAction &#x3D; DocNotExistAction.RETURN_NULL): Observable&lt;any&gt; {

    /* Listen for the docFs*/
    return this.listenForDocSimple$(docRef, actionIfNotExist).pipe(

      mergeMap((item: FireItem&lt;{}&gt;) &#x3D;&gt; {

        if (item &#x3D;&#x3D;&#x3D; null) { return of(item); }
        if (subCollectionQueries.length &lt;&#x3D; 0) { return of(item); }

        return this.listenForCollectionsDeep(item, subCollectionQueries);
      })
    );
  }

  /**
   * A replacement/extension to the AngularFirestoreCollection.add.
   * Does the same as AngularFirestoreCollection.add but can also add createdDate and modifiedDate and returns
   * the data with the added properties in FirebaseDbItem
   *
   * Used internally
   *
   * @param data the data to be added to the document, cannot contain types firestore won&#x27;t allow
   * @param collectionRef the CollectionReference where the document should be added
   * @param isAddDates if true adds modifiedDate and createdDate to the data
   * @param id if given the added document will be given this id, otherwise a random unique id will be used.
   */
  protected addSimple$&lt;T&gt;(data: T, collectionRef: CollectionReference, isAddDates: boolean &#x3D; true, id?: string):
    Observable&lt;FireItem&lt;T&gt;&gt; {

    // let dataToBeSaved: A &#x3D; Object.assign({}, data);

    let res$: Observable&lt;any&gt;;

    if (isAddDates) {
      const date &#x3D; new Date()
      data &#x3D; addCreatedDate(data, false, date);
      data &#x3D; addModifiedDate(data, false, date);
    }

    if (id !&#x3D;&#x3D; undefined) { res$ &#x3D; this.fs.set(collectionRef.doc(id), data) }
    else { res$ &#x3D; this.fs.add(collectionRef, data); }

    // if (Array.isArray(data) &amp;&amp; isAddDates) {
    //   data &#x3D; data.map(item &#x3D;&gt; {
    //     return {...item, modifiedDate: dataToBeSaved.modifiedDate, createdData: dataToBeSaved.createdData }
    //   })
    // }

    res$ &#x3D; res$.pipe(
      // tap(() &#x3D;&gt; this.snackBar.open(&#x27;Success&#x27;, &#x27;Added&#x27;, {duration: 1000})),
      // tap(ref &#x3D;&gt; console.log(ref)),
      // tap(() &#x3D;&gt; console.log(data)),
      map((ref: DocumentReference | undefined) &#x3D;&gt; {
        if (id &#x3D;&#x3D;&#x3D; undefined &amp;&amp; ref) {

          const path &#x3D; ref.path;

          const firestoreMetadata: FirestoreMetadata &#x3D; {
            id : ref.id,
            path,
            ref,
            isExists: true
          }

          return { ...data, firestoreMetadata} as FireItem&lt;T&gt;;

        } else { // if id is defined it means we used docRef.set and ref is undefined
          const path &#x3D; collectionRef.path + &#x27;/&#x27; + id;
          const ref &#x3D; getRefFromPath(path, this.fs.fbApp) as DocumentReference

          const firestoreMetadata: FirestoreMetadata &#x3D; {
            id: id as string,
            ref,
            path,
            isExists: true
          }

          return { ...data, firestoreMetadata} as FireItem&lt;T&gt;;
        }
      }),
    );

    return res$.pipe(
      take(1)
    );
  }

  /** Used internally for updates that doesn&#x27;t affect child documents */
  protected updateSimple$&lt;A&gt;(data: A, docRef: DocumentReference, isAddModifiedDate: boolean &#x3D; true): Observable&lt;void&gt; {

    if (isAddModifiedDate) {
      data &#x3D; addModifiedDate(data, false);
    }
    return this.fs.update(docRef, data);
  }

  /**
   * DO NOT CALL THIS METHOD, used by update deep
   */
  protected updateDeepToBatchHelper&lt;A&gt;(data: A,
                                       docRef: DocumentReference,
                                       subCollectionWriters: SubCollectionWriter[] &#x3D; [],
                                       isAddModifiedDate: boolean &#x3D; true,
                                       batch?: WriteBatch): WriteBatch {

    if (batch &#x3D;&#x3D;&#x3D; undefined) { batch &#x3D; this.fs.fbApp.firestore().batch(); }

    if (isAddModifiedDate) {
      data &#x3D; addModifiedDate(data, false);
    }

    const split &#x3D; this.splitDataIntoCurrentDocAndSubCollections(data, subCollectionWriters);
    const currentDoc &#x3D; split.currentDoc;
    const subCollections &#x3D; split.subCollections;

    // console.log(currentDoc, subCollections);
    batch.update(docRef, currentDoc);

    for (const [subCollectionKey, subDocUpdateValue] of Object.entries(subCollections)) {

      let subSubCollectionWriters: SubCollectionWriter[] | undefined; // undefined if no subCollectionWriters
      let subDocId: string | undefined;

      if (subCollectionWriters) {
        subSubCollectionWriters &#x3D; subCollectionWriters.find(subColl &#x3D;&gt; subColl.name &#x3D;&#x3D;&#x3D; subCollectionKey)?.subCollections;
        subDocId &#x3D; subCollectionWriters.find(subColl &#x3D;&gt; subColl.name &#x3D;&#x3D;&#x3D; subCollectionKey)?.docId;
      }

      subDocId &#x3D; subDocId !&#x3D;&#x3D; undefined ? subDocId : this.defaultDocId; /* Set default if none given */

      const subDocFs &#x3D; docRef.collection(subCollectionKey).doc(subDocId);

      batch &#x3D; this.updateDeepToBatchHelper(subDocUpdateValue, subDocFs, subSubCollectionWriters, isAddModifiedDate, batch);
    }

    return batch;
  }

  /**
   * Used mainly for drag and drop scenarios where we drag an item from one list to another and the the docs
   * have an index value and a groupName.
   *
   * @param previousArray
   * @param currentArray
   * @param previousIndex
   * @param currentIndex
   * @param currentArrayName
   * @param additionalDataUpdateOnMovedItem
   * @param isUpdateModifiedDateOnMovedItem
   * @param useCopy
   * @protected
   */
  protected getBatchFromTransferItemInIndexedDocs&lt;A extends {index: number, groupName: string}&gt;(
    previousArray: Array&lt;FireItem&lt;A&gt;&gt;,
    currentArray: Array&lt;FireItem&lt;A&gt;&gt;,
    previousIndex: number,
    currentIndex: number,
    currentArrayName: string,
    additionalDataUpdateOnMovedItem?: {[key: string]: any},
    isUpdateModifiedDateOnMovedItem &#x3D; true,
    useCopy &#x3D; false): firebase.firestore.WriteBatch {

    let usedPreviousArray: Array&lt;FireItem&lt;A&gt;&gt;;
    let usedCurrentArray: Array&lt;FireItem&lt;A&gt;&gt;;
    if (useCopy) {
      usedPreviousArray &#x3D; Object.assign([], previousArray);
      usedCurrentArray &#x3D; Object.assign([], currentArray);
    } else {
      usedPreviousArray &#x3D; previousArray;
      usedCurrentArray &#x3D; currentArray;
    }

    transferArrayItem(usedPreviousArray, usedCurrentArray, previousIndex, currentIndex);

    const batch &#x3D; this.fs.fbApp.firestore().batch();

    if (additionalDataUpdateOnMovedItem !&#x3D;&#x3D; undefined) {
      let movedItem &#x3D; usedCurrentArray[currentIndex];
      const movedItemRef &#x3D; movedItem.firestoreMetadata.ref;

      let data &#x3D; {...additionalDataUpdateOnMovedItem, groupName: currentArrayName }

      if (!useCopy) {
        addDataToItem(movedItem, data, true);
      }

      if (isUpdateModifiedDateOnMovedItem) {
        const date &#x3D; new Date()
        addModifiedDate(data, true, date)

        if (!useCopy) {
          addModifiedDate(movedItem, true, date);
        }
      }
      batch.update(movedItemRef, data);
    }

    const currentArraySliceToUpdate: Array&lt;FireItem&lt;A&gt;&gt; &#x3D; usedCurrentArray.slice(currentIndex);
    let i &#x3D; currentIndex;
    for (const item of currentArraySliceToUpdate) {
      batch.update(item.firestoreMetadata.ref, {index: i});

      if (!useCopy) {
        item.index &#x3D; i;
      }

      i++;
    }

    const prevArraySliceToUpdate: Array&lt;FireItem&lt;A&gt;&gt; &#x3D; usedPreviousArray.slice(previousIndex);
    i &#x3D; previousIndex;
    for (const item of prevArraySliceToUpdate) {
      batch.update(item.firestoreMetadata.ref, {index: i});

      if (!useCopy) {
        item.index &#x3D; i;
      }

      i++;
    }

    return batch;
  }


  /**
   * Delete Documents
   *
   * @param docRefs - A list of DocumentReference that are to be deleted
   */
  protected deleteMultipleSimple$(docRefs: DocumentReference[]): Observable&lt;void&gt; {

    const batch &#x3D; this.getDeleteMultipleSimpleBatch(docRefs);

    return this.batchCommit$(batch);
  }

  protected getDeleteMultipleSimpleBatch(docRefs: DocumentReference[], batch: WriteBatch &#x3D; this.fs.fbApp.firestore().batch()): WriteBatch {

    docRefs.forEach((docRef) &#x3D;&gt; {
      batch.delete(docRef);
    });

    return batch;
  }

  /**
   * Recursive method to clean FirestoreBaseItem properties from the dbItem
   *
   * @param dbItem the data to be cleaned
   * @param subCollectionWriters list of SubCollectionWriters to handle sub collections
   * @param additionalFieldsToRemove
   */
  protected removeDataExtrasRecursiveHelper&lt;T&gt;(dbItem: T &amp; DocumentData,
                                               subCollectionWriters: SubCollectionWriter[] &#x3D; [],
                                               additionalFieldsToRemove: string[] &#x3D; []): T {

    // const extraPropertyNames: string[] &#x3D; Object.getOwnPropertyNames(new DbItemExtras());
    const extraPropertyNames: string[] &#x3D; [&#x27;firestoreMetadata&#x27;].concat(additionalFieldsToRemove);

    /* Current level delete */
    for (const extraPropertyName of extraPropertyNames) {
      delete dbItem[extraPropertyName];
    }

    subCollectionWriters.forEach(col &#x3D;&gt; {
      if (Array.isArray(dbItem[col.name])) { /* property is array so will contain multiple docs */

        const docs: FireItem&lt;T&gt;[] &#x3D; dbItem[col.name];
        docs.forEach((d, i) &#x3D;&gt; {

          if (col.subCollections) {
            this.removeDataExtrasRecursiveHelper(d, col.subCollections, additionalFieldsToRemove);
          } else {
            /*  */
            for (const extraPropertyName of extraPropertyNames) {
              delete dbItem[col.name][i][extraPropertyName];
            }
          }
        });

      } else { /* not an array so a single doc*/

        if (col.subCollections) {
          this.removeDataExtrasRecursiveHelper(dbItem[col.name], col.subCollections, additionalFieldsToRemove);
        } else {
          for (const extraPropertyName of extraPropertyNames) {
            delete dbItem[col.name][extraPropertyName];
          }
        }

      }
    });

    return dbItem;

  }

  /**
   * Returns an Observable containing a list of DocumentReference found under the given docRef using the SubCollectionQuery[]
   * Mainly used to delete a docFs and its sub docs
   * @param ref: DocumentReference | CollectionReference
   * @param subCollectionQueries: SubCollectionQuery[]
   */
  protected getDocumentReferencesDeep$(ref: DocumentReference | CollectionReference,
                                       subCollectionQueries: SubCollectionQuery[] &#x3D; []):
    Observable&lt;DocumentReference[]&gt; {

    if (ref instanceof DocumentReference) {
      return this.getDocumentReferencesFromDocRef$(ref, subCollectionQueries);
    } else { // CollectionReference
      return this.getDocumentReferencesFromCollectionRef$(ref, subCollectionQueries);
    }
  }

  protected getDocumentReferencesFromDocRef$(docRef: DocumentReference,
                                             subCollectionQueries: SubCollectionQuery[] &#x3D; []):
    Observable&lt;DocumentReference[]&gt; {

    return this.listenForDoc$(docRef, subCollectionQueries).pipe(
      take(1),
      map(item &#x3D;&gt; this.getPathsFromItemDeepRecursiveHelper(item, subCollectionQueries)),
      // tap(pathList &#x3D;&gt; console.log(pathList)),
      map((pathList: string[]) &#x3D;&gt; {
        return pathList
          .map(path &#x3D;&gt; getRefFromPath(path, this.fs.fbApp) as DocumentReference);
      }),
      // tap(item &#x3D;&gt; console.log(item)),
    );
  }

  protected getDocumentReferencesFromCollectionRef$(collectionRef: CollectionReference,
                                                    subCollectionQueries: SubCollectionQuery[] &#x3D; []):
    Observable&lt;DocumentReference[]&gt; {

    return this.listenForCollectionSimple$(collectionRef).pipe(
      // @ts-ignore
      take(1),
      mergeMap((items: FireItem&lt;{}&gt;[]) &#x3D;&gt; {
        let docListeners: Array&lt;Observable&lt;any&gt;&gt;;
        docListeners &#x3D; items.map(item &#x3D;&gt; this.listenForDoc$(item.firestoreMetadata.ref, subCollectionQueries));
        return combineLatest(docListeners);
      }),
      map((items: FireItem&lt;{}&gt;[]) &#x3D;&gt; {

        let paths: string[] &#x3D; [];

        items.forEach(item &#x3D;&gt; {
          paths &#x3D; paths.concat(this.getPathsFromItemDeepRecursiveHelper(item, subCollectionQueries));
        });
        return paths;
      }),
      map((pathList: string[]) &#x3D;&gt; {
        return pathList
          .map(path &#x3D;&gt; getRefFromPath(path, this.fs.fbApp) as DocumentReference);
      }),
    )
  }

  /**
   * Used by deleteDeepByItem$ to get all the AngularFirestoreDocuments to be deleted
   * including child documents using SubCollectionQueries
   *
   * Internal use
   * @param item FirestoreItem from where we get the AngularFirestoreDocuments
   * @param subCollectionQueries if the dbItem has child documents the subCollectionQueries are needed to locate them
   */
  protected getDocumentReferencesFromItem&lt;T&gt;(
    item: FireItem&lt;T&gt;,
    subCollectionQueries: SubCollectionQuery[] &#x3D; []): DocumentReference[] {

    const paths &#x3D; this.getPathsFromItemDeepRecursiveHelper(item, subCollectionQueries);
    return paths.map(path &#x3D;&gt; getRefFromPath(path, this.fs.fbApp) as DocumentReference)
  }

  /**
   * DO NOT CALL THIS METHOD, its meant as a support method for getDocs$
   */
  protected getPathsFromItemDeepRecursiveHelper&lt;T&gt;(item: FireItem&lt;T&gt;,
                                                   subCollectionQueries: SubCollectionQuery[] &#x3D; []): string[] {

    if (subCollectionQueries &#x3D;&#x3D; null || subCollectionQueries.length &#x3D;&#x3D;&#x3D; 0) {
      return [item.firestoreMetadata.path];
    }
    let pathList: string[] &#x3D; [];
    pathList.push(item.firestoreMetadata.path);

    subCollectionQueries.forEach(col &#x3D;&gt; {
      if (Array.isArray((item as DocumentData)[col.name]) &amp;&amp; !col.docId) { /* property is array and not using docId so will contain multiple docs */

        const items: FireItem&lt;{}&gt;[] &#x3D; (item as DocumentData)[col.name];
        items.forEach(subItem &#x3D;&gt; {

          if (col.subCollections) {
            pathList &#x3D; pathList.concat(this.getPathsFromItemDeepRecursiveHelper(subItem, col.subCollections));
          } else {
            pathList.push(subItem.firestoreMetadata.path);
          }
        });

      } else { /* not an array so a single doc*/

        if (col.subCollections) {
          pathList &#x3D; pathList.concat(this.getPathsFromItemDeepRecursiveHelper(item, col.subCollections));
        } else {
          const subItem &#x3D; ((item as DocumentData)[col.name] as FireItem&lt;{}&gt;);
          if (subItem !&#x3D; null &amp;&amp; &#x27;path&#x27; in subItem.firestoreMetadata) {
            pathList.push(subItem.firestoreMetadata.path);
          }
          // const path &#x3D; (dbItem[col.name] as FirestoreItem).path;
        }

      }
    });

    return pathList;
  }

  /**
   * DO  NOT  CALL THIS METHOD, used in addDeep and updateDeep to split the data into currentDoc and subCollections
   * Only goes one sub level deep;
   */
  protected splitDataIntoCurrentDocAndSubCollections&lt;T&gt;(
    data: T,
    subCollectionWriters: SubCollectionWriter[] &#x3D; []): CurrentDocSubCollectionSplit {

    /* Split data into current doc and sub collections */
    let currentDoc: { [index: string]: any; } &#x3D; {};
    const subCollections: { [index: string]: any; }  &#x3D; {};

    /* Check if the key is in subCollections, if it is place it in subCollections else place it in currentDoc */

   // not array so object
    for (const [key, value] of Object.entries(data)) {
      // console.log(key, value);
      if (subCollectionWriters &amp;&amp; subCollectionWriters.length &gt; 0) {
        const subCollectionWriter: SubCollectionWriter | undefined &#x3D; subCollectionWriters.find(subColl &#x3D;&gt; subColl.name &#x3D;&#x3D;&#x3D; key);

        if (subCollectionWriter) {
          subCollections[key] &#x3D; value;
        } else {
          currentDoc[key] &#x3D; value;
        }
      }
      else {
        currentDoc &#x3D; data;
      }
    }


    return {
      currentDoc,
      subCollections
    } as CurrentDocSubCollectionSplit;
  }

  /**
   * Turn a batch into an Observable instead of Promise.
   *
   * For some reason angularfire returns a promise on batch.commit() instead of an observable like for
   * everything else.
   *
   * This method turns it into an observable
   */
  protected batchCommit$(batch: firebase.firestore.WriteBatch): Observable&lt;void&gt; {
    return from( batch.commit() ).pipe(
      take (1)
    );
  }
}
</code></pre>
    </div>
</div>



                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'class';
            var COMPODOC_CURRENT_PAGE_URL = 'FirestoreExtended.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       
       <script type="module" src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
